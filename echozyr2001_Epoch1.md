# CFC Studio å…±å­¦ Epoch1 æŒ‡å¼•

---

# [echozyr2001]

## ç¬”è®°è¯æ˜

<!-- Content_START -->

### 01.06

> å­¦ä¹ æ—¶é—´ï¼š70 min

---

**ä¸»æµ shellï¼š** Bashã€Zshã€Fish

**ä¸»æµç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼š** iTerm2ã€Alacrittyã€Hyperã€Kittyã€Terminusã€Ghostty

---

â€œshell æ˜¯ä¸€ä¸ªç¼–ç¨‹ç¯å¢ƒï¼Œæ‰€ä»¥å®ƒå…·å¤‡å˜é‡ã€æ¡ä»¶ã€å¾ªç¯å’Œå‡½æ•°â€ï¼ˆä¹‹å‰æ²¡æœ‰ä»è¿™ä¸ªè§’åº¦ç†è§£è¿‡ï¼‰

å¦‚æ­¤ç†è§£çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯” luaã€python ç­‰è„šæœ¬è¯­è¨€çš„æ‰§è¡Œç¯å¢ƒã€‚

---

```bash
-rw-r--r--
```

rwx æ¯ä¸‰ä¸ªå­—ç¬¦æ„æˆä¸€ç»„ã€‚åˆ†åˆ«ä»£è¡¨äº†æ–‡ä»¶æ‰€æœ‰è€…ï¼Œç”¨æˆ·ç»„ä»¥åŠå…¶ä»–æ‰€æœ‰äººå…·æœ‰çš„æƒé™ã€‚

æœ€å‰é¢çš„å­—ç¬¦ç”¨æ¥è¡¨ç¤ºæ–‡ä»¶å±æ€§ï¼Œ`d` è¡¨ç¤ºç›®å½•ï¼Œ`l` è¡¨ç¤ºé“¾æ¥æ–‡ä»¶ï¼Œ`-` è¡¨ç¤ºæ™®é€šæ–‡ä»¶ã€‚è¿™ä¸‰ä¸ªå­—ç¬¦å¯ä»¥åˆ†åˆ«å¯¹åº”ä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼Œæ¯ä¸€ç»„çš„æƒé™å°±å¯ä»¥ç”¨ `0ï½7` æ¥è¡¨ç¤ºã€‚

æ›¾ç»é‡åˆ°è¿‡ä¸€ä¸ªé—®é¢˜ï¼Œå¯¹äº `.pem` è¿™æ ·çš„ç§é’¥æ–‡ä»¶ï¼Œä½ å¿…é¡»å°†å…¶æƒé™è®¾ç½®ä¸º `600` æ‰èƒ½ä½¿ç”¨ï¼ˆå³ `-rw-------`ï¼‰ï¼Œä¸ç„¶ä¼šé‡åˆ°æ–‡ä»¶æƒé™è¿‡å¤§æ— æ³•æ‰§è¡Œçš„é—®é¢˜ã€‚

---

**å•å¼•å·ä¸åŒå¼•å·åœ¨bashä¸­çš„åŒºåˆ«ï¼Ÿ**

> reference:
>
> https://www.gnu.org/software/bash/manual/html_node/Quoting.html

**shell æ˜¯å¦‚ä½•çŸ¥æ™“è¿™ä¸ªæ–‡ä»¶éœ€è¦ä½¿ç”¨ sh æ¥è§£æå‘¢ï¼Ÿ**

> reference:
>
> https://en.wikipedia.org/wiki/Shebang_(Unix)
>
> åœ¨ç±» Unix ç³»ç»Ÿä¸­åƒä½¿ç”¨å¯æ‰§è¡Œæ–‡ä»¶é‚£æ ·ä½¿ç”¨ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œç¨‹åºåŠ è½½å™¨æœºåˆ¶ä¼šå°†æ–‡ä»¶åˆå§‹è¡Œè¿›è¡Œè§£æï¼Œå…¶ä¸­ `#!` è¿™éƒ¨åˆ†è¢«ç§°ä¸º `shebang`ï¼Œé™¤æ­¤ä¹‹å¤–çš„å…¶ä»–éƒ¨åˆ†å°†è¢«è§£æä¸ºæŒ‡ä»¤ã€‚
>
> ä¾‹å¦‚ï¼Œå¦‚æœè„šæœ¬ä»¥è·¯å¾„ `path/to/script` å‘½åï¼Œå¹¶ä¸”ä»¥ `#!/bin/sh` å¼€å¤´ï¼Œåˆ™æŒ‡ç¤ºç¨‹åºåŠ è½½å™¨è¿è¡Œç¨‹åº `/bin/sh` ï¼Œä¼ é€’ `path/to/script` ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚

---

**shell çš„é…ç½®**

1. å®‰è£… zsh

2. å®‰è£…æ’ä»¶ç®¡ç†å™¨

- è½»é‡åŒ– zinitï¼š https://github.com/zdharma-continuum/zinit
- é‡é‡çº§oh-my-zshï¼šhttps://ohmyz.sh/

3. ä¸»é¢˜é…ç½®ä½¿ç”¨ starshipï¼šhttps://starship.rs/zh-CN/

---

æ–‡ç« ä¸­æåˆ°åœ¨ `echo` è¿™æ ·çš„å‘½ä»¤é‡åˆ°ç©ºæ ¼æ—¶ï¼Œéœ€è¦ä½¿ç”¨ `"` æˆ–è½¬ä¹‰å­—ç¬¦ï¼Œä½†æ˜¯æˆ‘å‘ç°åœ¨æˆ‘çš„ç»ˆç«¯ä¸­ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚

```zsh
âœ  The-Missing-Semester git:(main) âœ— echo $SHELL
/bin/zsh
âœ  The-Missing-Semester git:(main) âœ— echo hello world
hello world
```

èµ·åˆæˆ‘ä»¥ä¸ºè¿™æ˜¯ `zsh` çš„ç‰¹æ®ŠåŠŸèƒ½ï¼Œä½†æ˜¯æˆ‘å‘ç°åœ¨ ubuntu ä¸Šä¹Ÿæ˜¯åŒæ ·çš„ç»“æœ

```bash
ubuntu@instance-20241225-1836:~$ echo $SHELL
/bin/bash
ubuntu@instance-20241225-1836:~$ echo hello world
hello world
```

åœ¨ä½¿ç”¨ `$ touch hello world` æ—¶åˆ›å»ºäº† `hello` å’Œ `world` ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆæ­¥è®¤ä¸ºæ˜¯ `echo` å‘½ä»¤çš„ç‰¹æ®Šã€‚

---

è®²ç¯å¢ƒå˜é‡éƒ¨åˆ†ï¼Œè®©æˆ‘æƒ³åˆ°äº† python çš„è™šæ‹Ÿç¯å¢ƒ

```bash
# This file must be used with "source bin/activate" *from bash*
# You cannot run it directly

deactivate () {
    # reset old environment variables
    if [ -n "${_OLD_VIRTUAL_PATH:-}" ] ; then
        PATH="${_OLD_VIRTUAL_PATH:-}"
        export PATH
        unset _OLD_VIRTUAL_PATH
    fi
    if [ -n "${_OLD_VIRTUAL_PYTHONHOME:-}" ] ; then
        PYTHONHOME="${_OLD_VIRTUAL_PYTHONHOME:-}"
        export PYTHONHOME
        unset _OLD_VIRTUAL_PYTHONHOME
    fi

    # Call hash to forget past commands. Without forgetting
    # past commands the $PATH changes we made may not be respected
    hash -r 2> /dev/null

    if [ -n "${_OLD_VIRTUAL_PS1:-}" ] ; then
        PS1="${_OLD_VIRTUAL_PS1:-}"
        export PS1
        unset _OLD_VIRTUAL_PS1
    fi

    unset VIRTUAL_ENV
    unset VIRTUAL_ENV_PROMPT
    if [ ! "${1:-}" = "nondestructive" ] ; then
    # Self destruct!
        unset -f deactivate
    fi
}

# unset irrelevant variables
deactivate nondestructive

# on Windows, a path can contain colons and backslashes and has to be converted:
case "$(uname)" in
    CYGWIN*|MSYS*)
        # transform D:\path\to\venv to /d/path/to/venv on MSYS
        # and to /cygdrive/d/path/to/venv on Cygwin
        VIRTUAL_ENV=$(cygpath "/Users/echo/CodeFile/Python/venv")
        export VIRTUAL_ENV
        ;;
    *)
        # use the path as-is
        export VIRTUAL_ENV="/Users/echo/CodeFile/Python/venv"
        ;;
esac

_OLD_VIRTUAL_PATH="$PATH"
PATH="$VIRTUAL_ENV/bin:$PATH"
export PATH

VIRTUAL_ENV_PROMPT="venv"
export VIRTUAL_ENV_PROMPT

# unset PYTHONHOME if set
# this will fail if PYTHONHOME is set to the empty string (which is bad anyway)
# could use `if (set -u; : $PYTHONHOME) ;` in bash
if [ -n "${PYTHONHOME:-}" ] ; then
    _OLD_VIRTUAL_PYTHONHOME="${PYTHONHOME:-}"
    unset PYTHONHOME
fi

if [ -z "${VIRTUAL_ENV_DISABLE_PROMPT:-}" ] ; then
    _OLD_VIRTUAL_PS1="${PS1:-}"
    PS1="(venv) ${PS1:-}"
    export PS1
fi

# Call hash to forget past commands. Without forgetting
# past commands the $PATH changes we made may not be respected
hash -r 2> /dev/null
```

é€šè¿‡ä¿®æ”¹ `bashrc` ç­‰æ–‡ä»¶ï¼Œæ¥é…ç½®å¯åŠ¨é¡¹ï¼Œè¿™äº›å‘½ä»¤ä¼šåœ¨ç»ˆç«¯å¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚

```bash
export NVM_DIR="$HOME/.nvm"
  [ -s "/opt/homebrew/opt/nvm/nvm.sh" ] && \. "/opt/homebrew/opt/nvm/nvm.sh"  # This loads nvm
  [ -s "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm" ] && \. "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm"  # This loads nvm bash_completion

# export https_proxy=http://127.0.0.1:1082 http_proxy=http://127.0.0.1:1082 all_proxy=socks5://127.0.0.1:1082
export https_proxy=http://127.0.0.1:7897 http_proxy=http://127.0.0.1:7897 all_proxy=socks5://127.0.0.1:7897
export PATH="/opt/homebrew/opt/llvm/bin:$PATH"
export LIBRARY_PATH="$LIBRARY_PATH:$(brew --prefix)/lib"

alias python="python3"

alias c="clear"
alias i="cd ~/CodeFile"
alias ir="cd ~/CodeFile/Rust"
alias in="cd ~/CodeFile/node"
alias cb="cargo build"
alias cr="cargo run"
export DVM_DIR="/Users/echo/.dvm"
export PATH="$DVM_DIR/bin:/Users/echo/go/bin:$PATH"

source /Users/echo/.docker/init-zsh.sh || true # Added by Docker Desktop
```

å¯¹äºå•ä¸ªç”¨æˆ·æ¥è¯´ï¼Œå®ƒä»¬ä¸€èˆ¬åœ¨ç”¨æˆ·çš„ home ç›®å½•ä¸‹ `.bashrc` æˆ– `.zshrc`ã€‚å¯¹äºå…¨å±€æ¥ä¸€èˆ¬åœ¨ `/etc/profile` æˆ– `/etc/bashrc`ã€‚

> linux é…ç½®ç¯å¢ƒå˜é‡å¦‚æ­¤ç®€å•ï¼Œwindows å°±æ˜¯ ğŸ’©

---

`cd -` å‘½ä»¤ï¼Œå›åˆ°ä¸Šä¸€æ¬¡çš„ç›®å½•ï¼Œå¯ä»¥ç”¨æ¥åœ¨ä¸¤ä¸ªç›®å½•ä¸­è·³è½¬ã€‚

`ctrl l` ä»£æ›¿ `clear` ç”¨æ¥æ¸…å±ã€‚

`tee` å‘½ä»¤æ„Ÿè§‰å¾ˆå®ç”¨ï¼Œæœ‰æ—¶é—´å¯ä»¥æ·±å…¥äº†è§£ä¸€ä¸‹ã€‚

### 01.07

> å­¦ä¹ æ—¶é—´ï¼š60 min

---

**å¤§å¤šæ•° shell éƒ½æœ‰è‡ªå·±çš„ä¸€å¥—è„šæœ¬è¯­è¨€ï¼ŒåŒ…æ‹¬å˜é‡ã€æ§åˆ¶æµå’Œè‡ªå·±çš„è¯­æ³•ã€‚**

æ®æˆ‘æ‰€çŸ¥ï¼Œç‰¹åˆ«æ˜¯ fish çš„è„šæœ¬è¯­è¨€ä¸ bash æœ‰å¾ˆå¤§ä¸åŒã€‚æˆ‘ä»¬åœ¨å†™è„šæœ¬æ—¶æ·»åŠ  `#!/bin/sh` å°±èƒ½æ¶ˆé™¤ç”±äºä½¿ç”¨çš„ shell ä¸åŒå¯¼è‡´è„šæœ¬æ— æ³•é€šç”¨çš„é—®é¢˜ã€‚

---

é«˜çº§ Bash è„šæœ¬ç¼–å†™æŒ‡å—ï¼šhttps://tldp.org/LDP/abs/html/special-chars.html

> `$0` - è„šæœ¬å
>
> `$1` åˆ° $9 - è„šæœ¬çš„å‚æ•°ã€‚ $1 æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¾æ­¤ç±»æ¨ã€‚
>
> `$@` - æ‰€æœ‰å‚æ•°
>
> `$#` - å‚æ•°ä¸ªæ•°
>
> `$?` - å‰ä¸€ä¸ªå‘½ä»¤çš„è¿”å›å€¼
>
> `$$` - å½“å‰è„šæœ¬çš„è¿›ç¨‹è¯†åˆ«ç 
>
> `!!` - å®Œæ•´çš„ä¸Šä¸€æ¡å‘½ä»¤ï¼ŒåŒ…æ‹¬å‚æ•°ã€‚å¸¸è§åº”ç”¨ï¼šå½“ä½ å› ä¸ºæƒé™ä¸è¶³æ‰§è¡Œå‘½ä»¤å¤±è´¥æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ sudo !! å†å°è¯•ä¸€æ¬¡ã€‚
>
> `$_` - ä¸Šä¸€æ¡å‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨çš„æ˜¯äº¤äº’å¼ shellï¼Œä½ å¯ä»¥é€šè¿‡æŒ‰ä¸‹ Esc ä¹‹åé”®å…¥ . æ¥è·å–è¿™ä¸ªå€¼ã€‚

---

tldr å‘½ä»¤ï¼šæ¯” man æ›´ç®€çŸ­çš„æ‰‹å†ŒæŸ¥è¯¢

---

||ï¼šâ€œé€»è¾‘æˆ–â€ æ“ä½œï¼Œåªæœ‰å½“å·¦ä¾§å‘½ä»¤å¤±è´¥ï¼ˆé€€å‡ºçŠ¶æ€ç é 0ï¼‰æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå³ä¾§å‘½ä»¤ã€‚ï¼ˆä¸¤æ¡å‘½ä»¤ä¸­è‡³å°‘æ‰§è¡Œä¸€ä¸ªï¼Ÿï¼‰

&&ï¼šâ€œé€»è¾‘ä¸â€ æ“ä½œï¼Œåªæœ‰å½“å·¦ä¾§å‘½ä»¤æˆåŠŸï¼ˆé€€å‡ºç ä¸º 0ï¼‰æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå³ä¾§å‘½ä»¤ã€‚ï¼ˆä¸¤å°å‘½ä»¤éƒ½è¦æ‰§è¡Œï¼Ÿï¼‰

---

<(CMD) çš„ä½œç”¨æ˜¯å°†å‘½ä»¤ CMD çš„è¾“å‡ºæä¾›ç»™éœ€è¦æ–‡ä»¶åä½œä¸ºè¾“å…¥çš„ç¨‹åºï¼Œè€Œä¸æ˜¯ç›´æ¥é€šè¿‡ç®¡é“ | ä¼ é€’æ•°æ®ã€‚

> æ²¡ç”¨è¿‡ï¼ŒæŠ½æ—¶é—´ç†Ÿæ‚‰

---

ä½¿ç”¨ `?` å’Œ `*` æ¥åŒ¹é…ä¸€ä¸ªæˆ–ä»»æ„ä¸ªå­—ç¬¦ã€‚`*` é€šé…ç¬¦çŸ¥é“ï¼Œä½†æ˜¯ä½¿ç”¨ `?` åŒ¹é…å•ä¸ªå­—ç¬¦è¿˜æ˜¯ç¬¬ä¸€æ¬¡äº†è§£ã€‚

`{}` å½“å‘½ä»¤ä¸­æœ‰å…¬å…±å­ä¸²æ—¶ï¼Œå¯ä»¥ç”¨æ¥ç®€åŒ–å‘½ä»¤ã€‚ä¾‹å¦‚ï¼š

```bash
convert image.{png,jpg}
# ä¼šå±•å¼€ä¸º
convert image.png image.jpg

cp /path/to/project/{foo,bar,baz}.sh /newpath
# ä¼šå±•å¼€ä¸º
cp /path/to/project/foo.sh /path/to/project/bar.sh /path/to/project/baz.sh /newpath
```

---

`env` å‘½ä»¤ï¼Œç”¨äºæ˜¾ç¤ºç³»ç»Ÿä¸­å­˜åœ¨çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼Œç”¨åœ¨ `shebang` ä¸­å¯ä»¥å¢åŠ è„šæœ¬çš„é€šç”¨æ€§ã€‚

å°±æ‹¿ Python æ¥è¯´ï¼Œæ¯•ç«Ÿä¸æ˜¯æ‰€æœ‰äººéƒ½ä¼šè®²å®ƒå®‰è£…åœ¨ç›¸åŒçš„ç›®å½•ä¸­ï¼Œ`#!/usr/bin/env python` å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

---

shellcheck å¼ºå¤§çš„ sh è„šæœ¬æ£€æŸ¥å™¨

```
#!/bin/bash

# æ£€æŸ¥PIDæ–‡ä»¶æ˜¯å¦å­˜åœ¨
if [ ! -f zkrock.pid ]; then
  echo "PID file not found. Is zkrock running?"
  exit 1
fi

# è¯»å–PID
PID=$(cat zkrock.pid)

# åœæ­¢è¿›ç¨‹
kill $PID

# ç­‰å¾…è¿›ç¨‹ç»“æŸ
sleep 1

# æ£€æŸ¥è¿›ç¨‹æ˜¯å¦æˆåŠŸåœæ­¢
if ps -p $PID > /dev/null; then
   echo "Failed to stop zkrock. Force stopping..."
   kill -9 $PID
fi

# åˆ é™¤PIDæ–‡ä»¶
rm zkrock.pid

echo "Zkrock stopped."
```

æ£€æŸ¥å‡ºæ¥æœ‰ä¸‹é¢è¿™äº›å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹

```
In stop.sh line 13:
kill $PID
     ^--^ SC2086 (info): Double quote to prevent globbing and word splitting.

Did you mean:
kill "$PID"


In stop.sh line 19:
if ps -p $PID > /dev/null; then
         ^--^ SC2086 (info): Double quote to prevent globbing and word splitting.

Did you mean:
if ps -p "$PID" > /dev/null; then


In stop.sh line 21:
   kill -9 $PID
           ^--^ SC2086 (info): Double quote to prevent globbing and word splitting.

Did you mean:
   kill -9 "$PID"
```

---

è§†é¢‘é‡Œè®²äº†å¾ˆå¤šå·¥å…·ï¼Œæˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„æ˜¯ `fzf` å’Œ `ripgrep`ã€‚æœ‰å¾ˆå¤šå®ç”¨æ’ä»¶éƒ½æ˜¯åŸºäºå®ƒä»¬å®ç°çš„ã€‚

---

è¯¾åç»ƒä¹ æš‚æ—¶ä¸åšäº†

### 01.08

> å­¦ä¹ æ—¶é—´ï¼š70 min

---

`sed` æ˜¯ä¸€ä¸ªæµç¼–è¾‘å™¨ï¼Œå¯ä»¥ç”¨æ¥æ›¿æ¢æ–‡æœ¬ä¸­çš„å†…å®¹ï¼Œæ›¿æ¢çš„å‘½ä»¤ä¸º `s` : `s/REGEX/SUBSTITUTION/`ï¼ˆè¿™åœ¨ vim ä¸­ä¹Ÿå¾ˆå¸¸ç”¨ï¼‰

å…¶ä¸­ `REGEX` éƒ¨åˆ†æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œ`SUBSTITUTION` æ˜¯ç”¨äºæ›¿æ¢åŒ¹é…ç»“æœçš„æ–‡æœ¬ã€‚

```bash
ssh myserver journalctl
 | grep sshd
 | grep "Disconnected from"
 | sed 's/.*Disconnected from //'
```

---

æ­£åˆ™è¡¨è¾¾å¼åœ¨çº¿è°ƒè¯•å·¥å…·ï¼šhttps://regex101.com/

æ­£åˆ™è¡¨è¾¾å¼è¿™éƒ¨åˆ†è®©æˆ‘æƒ³åˆ°äº†ä¹‹å‰åœ¨å­¦ç¼–è¯‘åŸç†æ—¶è¿˜æƒ³è‡ªå·±å®ç°ä¸€ä¸ªæ­£åˆ™è§£æå™¨ï¼Œæ”¶è—äº†å¾ˆå¤šèµ„æ–™ä½†ä¸€ç›´æ²¡æœ‰å¼€å§‹ã€‚ç­‰ç©ºä¸‹æ¥å¯ä»¥å»å®ç°æ¥ç©ç©ã€‚

æ­£åˆ™è¡¨è¾¾å¼åœ¨æŸäº›æƒ…å†µä¸‹ä¼šéå¸¸å¤æ‚ï¼Œå®ƒ**æ˜¯**ä¸‡èƒ½çš„åˆ**ä¸æ˜¯**ä¸‡èƒ½çš„ï¼Œè‹¥ä½ è¦è§£æ `json` ç­‰ç»“æ„ï¼Œæœ‰æ›´å¥½çš„å·¥å…·å¯ä»¥ä½¿ç”¨ï¼Œä¸ç”¨å¼ºæ±‚å»ä½¿ç”¨æ­£åˆ™ã€‚

---

å¹³æ—¶çš„æ•°æ®å¤„ç†ï¼Œæˆ‘å‡ ä¹åªä¼šä½¿ç”¨ `cat` `tail` `grep`

`awk` ç¼–ç¨‹è¯­è¨€ä»‹ç»ï¼šhttps://backreference.org/2010/02/10/idiomatic-awk/

æ¨èä¸€ä¸ªç½‘ç«™ **Learn x in y minutesï¼ˆy åˆ†é’Ÿå­¦ä¹  xï¼‰**ï¼šhttps://learnxinyminutes.com/

---

MLK DAY é©¬ä¸Â·è·¯å¾·Â·é‡‘çºªå¿µæ—¥ å®ƒä»¬å±…ç„¶è¿˜ä¼šæ”¾å‡

---

æ•°æ®å¤„ç†è¿™éƒ¨åˆ†è®²äº†å¾ˆå¤šå·¥å…·çš„ä½¿ç”¨ï¼Œæ²¡æœ‰å¤ªå¤šå¯ä»¥è®°å½•çš„ä¸œè¥¿ï¼Œä¸»è¦æ˜¯äº†è§£è¿™äº›å·¥å…·ï¼Œæ—¥åé‡åˆ°ä¸€äº›æƒ…å†µå°±å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚

å·¥å…·ä¸€å®šæ˜¯è¶Šç”¨è¶Šç†Ÿç»ƒçš„ï¼Œå¹³æ—¶ä¹Ÿéœ€è¦æœ‰æ„è¯†åœ°å»ä½¿ç”¨è¿™äº›æ•°æ®å¤„ç†çš„å·¥å…·ã€‚å°±ç®—ä¸ç”¨è¯¾ç¨‹ä¸­è®²åˆ°çš„å·¥å…·ï¼Œpythonã€lua ç­‰æ›´ç°ä»£çš„è„šæœ¬è¯­è¨€ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚

### 01.09

> å­¦ä¹ æ—¶é—´ï¼š60 min

---

vscode neovim æ’ä»¶ https://marketplace.visualstudio.com/items?itemName=asvetliakov.vscode-neovim

ä¸€äº›é…ç½®

```json
{
  "vscode-neovim.neovimExecutablePaths.linux": "/usr/bin/nvim",
  "vscode-neovim.neovimInitVimPaths.linux": "$HOME/.config/nvim/init.lua",
  "vscode-neovim.compositeKeys": {
    "jk": {
      "command": "vscode-neovim.lua",
      "args": [
        "vim.api.nvim_input('<ESC>')\nrequire('vscode-neovim').action('workbench.action.files.save')"
      ]
    }
  }
}
```

---

- è¡Œï¼š 0 ï¼ˆè¡Œåˆï¼‰ï¼Œ ^ ï¼ˆç¬¬ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦ï¼‰ï¼Œ $ ï¼ˆè¡Œå°¾ï¼‰
- å±å¹•ï¼š H ï¼ˆå±å¹•é¦–è¡Œï¼‰ï¼Œ M ï¼ˆå±å¹•ä¸­é—´ï¼‰ï¼Œ L ï¼ˆå±å¹•åº•éƒ¨ï¼‰

---

**å®**

`q{å­—ç¬¦}` æ¥å¼€å§‹åœ¨å¯„å­˜å™¨ `{å­—ç¬¦}` ä¸­å½•åˆ¶å®

`q` åœæ­¢å½•åˆ¶

`@{å­—ç¬¦}` é‡æ”¾å®

---

å› ä¸ºæœ¬èº«æ¯”è¾ƒç†Ÿæ‚‰ `vim` çš„æ“ä½œï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†ç›´æ¥å¿«é€Ÿæ è¿‡äº†ï¼Œä»…è®°å½•äº†ä¸€äº›ä¹‹å‰æ²¡ç”¨è¿‡ä»¥åŠè§‰å¾—æ¯”è¾ƒé‡è¦çš„å†…å®¹ã€‚

ç„¶åèŠ±äº†ä¸€ç‚¹æ—¶é—´æ¥é…ç½® `neovim`ã€‚ï¼ˆ`neovim` æ˜¯æ›´ç°ä»£åŒ–çš„ `vim` å¯ä»¥ä½¿ç”¨ `lua` è¯­è¨€æ¥è¿›è¡Œé…ç½®ï¼‰ç®€å•åšäº›è®°å½•ã€‚

`neovim` ç›®å‰å·²ç»æœ‰å¾ˆå¤šæˆç†Ÿçš„é…ç½® [Lazyvim](https://www.lazyvim.org/)ã€[NvChad](https://nvchad.com/)

åˆæ¬¡å°è¯• `neovim` å¯ä»¥é€‰æ‹©å…¶ä¸€è¿›è¡Œä½“éªŒï¼Œå®ƒä»¬çš„å®˜ç½‘ä¸­éƒ½æä¾›äº†æ’ä»¶é…ç½®çš„æ•™ç¨‹ï¼Œæƒ³è¦åˆ‡æ¢ä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¦åˆ é™¤æˆ–é‡å‘½å `~/.config/nvim` æ–‡ä»¶å¤¹ï¼Œç„¶åæ¢ä¸Šæ–°çš„é…ç½®å³å¯ã€‚

```bash
âœ  ~ ls ~/.config | grep "nvim"
nvim
nvim.astron-back
nvim.lazy-back
nvim.self-back
nvim.tar.gz
```

æˆ‘è®¡åˆ’åŸºäº https://github.com/nvim-lua/kickstart.nvim è¿›è¡Œé…ç½®ï¼Œå› ä¸º `Lazyvim` ä¸ `NvChad` çš„é…ç½®éå¸¸åºå¤§ä¸å¤æ‚ï¼ˆåœ¨ 1c1g çš„æœåŠ¡å™¨ä¸Šç”šè‡³èƒ½æŠŠå†…å­˜å¹²æ»¡ï¼‰ï¼Œæœ‰å¾ˆå¤šæˆ‘ä¸éœ€è¦çš„åŠŸèƒ½ï¼Œä¸€äº›å¿«æ·é”®ä¹Ÿä¸æ˜¯æˆ‘ä¹ æƒ¯çš„ï¼Œå¹¶ä¸”å®šåˆ¶å…¶ä¸­ä¸€äº›æ’ä»¶ä¼šéå¸¸å¤æ‚ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚

`kickstart` æ˜¯ä¸€ä¸ªéå¸¸ç²¾ç®€çš„ neovim åˆå§‹é…ç½®ã€‚ä½†ä¹Ÿä¸æ˜¯ç›´æ¥å°†å®ƒå…‹éš†ä¸‹æ¥ç„¶ååšå®šåˆ¶ã€‚è€Œæ˜¯ä»é›¶å¼€å§‹é…ç½®ï¼Œå‚è€ƒå®ƒçš„æ–‡ä»¶ç»“æ„ä»¥åŠé…ç½®å†…å®¹ã€‚

è¿™æ ·æ‰èƒ½åšåˆ°åœ¨æœ€å°çš„åŒ–çš„å®‰è£…ä¸‹å°½å¯èƒ½æ»¡è¶³è‡ªå·±çš„è¦æ±‚ï¼Œæ—¥ååšä¿®æ”¹ä¹Ÿéå¸¸å®¹æ˜“ï¼Œæ¯•ç«Ÿé…ç½®æ˜¯è‡ªå·±ä¸€ä¸ªå­—ä¸€ä¸ªå­—å†™çš„ã€‚

### 01.10

> å­¦ä¹ æ—¶é—´ï¼š70 min

ä»Šå¤©ä¸»è¦æ˜¯åœ¨å°è¯•å¯¹ `neovim` è¿›è¡Œé…ç½®ï¼ŒèŠ±äº† 20 åˆ†é’Ÿåœ¨ `learnxinyminutes` ä¸Šå¿«é€Ÿè¿‡äº†ä¸€é `lua` è¯­è¨€ï¼Œå‰©ä¸‹æ—¶é—´ä¸»è¦åœ¨ç†Ÿæ‚‰ `kickstart` é¡¹ç›®ã€‚

### 01.11

> å­¦ä¹ æ—¶é—´ï¼š70 min

ä¸»è¦åœ¨å›é¡¾æœ¬å‘¨å†…å®¹ï¼Œä¹Ÿæœ‰ä¸€äº›æ–°çš„æƒ³æ³•è®°å½•åœ¨ä¸‹é¢ï¼š

---

`tee` å‘½ä»¤å¯ä»¥ç”¨æ¥ç”¨åšä¸¤ä¸ªå‘½ä»¤ä¹‹é—´çš„è¿æ¥ã€‚

> Read from `stdin` and write to `stdout` and files (or commands).

---

`foobar` æ–‡åŒ–ï¼Œåœ¨ä½ ä¸çŸ¥é“å¦‚ä½•å‘½åæ—¶é€šå¸¸ä½¿ç”¨å®ƒä»¬ï¼Œç±»ä¼¼ä¸­æ–‡ç¯å¢ƒä¸‹çš„å°æ˜ã€å°çº¢ã€‚

---

å¸¸ç”¨æ–‡ä»¶æè¿°ç¬¦ï¼š

- `0` è¡¨ç¤º `stdin`
- `1` è¡¨ç¤º `stdout`
- `2` è¡¨ç¤º `stderr`
- `/dev/null` è¡¨ç¤ºç©ºæ–‡ä»¶

`stdout` å’Œ `stderr` é»˜è®¤éƒ½æ˜¯å°†ä¿¡æ¯è¾“å‡ºåˆ°ç»ˆç«¯ä¸Šï¼Œä½†æ˜¯å®ƒä»¬è¿˜æ˜¯æœ‰åŒºåˆ«ã€‚

```C
int main(){
  fprintf(stdout,"Hello ");
  fprintf(stderr,"World!");
  return0;
}
```

ä¸Šé¢è¿™æ®µä»£ç çš„è¾“å‡ºæ˜¯ `World!Hello `ã€‚

åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ`stdout` æ˜¯è¡Œç¼“å†²çš„ï¼Œä»–çš„è¾“å‡ºä¼šæ”¾åœ¨ä¸€ä¸ª `buffer` é‡Œé¢ï¼Œåªæœ‰åˆ°æ¢è¡Œçš„æ—¶å€™ï¼Œæ‰ä¼šè¾“å‡ºåˆ°å±å¹•ã€‚è€Œ `stderr` æ˜¯æ— ç¼“å†²çš„ï¼Œä¼šç›´æ¥è¾“å‡ºã€‚

---

åœ¨ä¸çŸ¥é“è„šæœ¬è¿è¡Œæ–‡ä»¶çš„ä½ç½®æ—¶ï¼Œä½¿ç”¨ `#!/usr/bin/env <CMD>`

---

**åˆ°åº•ä»€ä¹ˆæ˜¯ Shell**

shell ç›´è¯‘è¿‡æ¥æ˜¯ â€œå¤–å£³â€ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„ç”¨æˆ·ç¨‹åºï¼Œç»™ç”¨æˆ·æä¾›äº†ä½¿ç”¨æ“ä½œç³»ç»ŸæœåŠ¡çš„æ¥å£ã€‚shell æ¥å—ç”¨æˆ·è¾“å…¥çš„äººç±»å¯è¯»çš„å‘½ä»¤ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå†…æ ¸å¯ä»¥ç†è§£çš„å†…å®¹ï¼Œå½“ç”¨æˆ·å¯åŠ¨ç»ˆç«¯æ—¶ï¼Œshell å°±ä¼šå¯åŠ¨ã€‚

shell æœ‰ä¸¤ç±»ï¼šå‘½ä»¤è¡Œ shellï¼ˆCLIï¼‰ å’Œå›¾å½¢ shellï¼ˆGUIï¼‰ã€‚

shell ä¹Ÿæ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œä¸æˆ‘ä»¬å¸¸è§çš„è„šæœ¬è¯­è¨€ pythonã€lua ç±»ä¼¼ï¼Œå®ƒä»¬éƒ½æœ‰ä¸€ä¸ªäº¤äº’å¼ç¼–ç¨‹ç¯å¢ƒï¼Œè¿™ä¸ªç¯å¢ƒå«åš `REPL`ï¼ˆRead-Eval-Print-Loopï¼‰ã€‚æˆ‘ä»¬ä½¿ç”¨ shell å…¶å®å°±æ˜¯åœ¨ä½¿ç”¨å®ƒçš„ REPLã€‚

---

ç»§ç»­ `neovim` çš„é…ç½®

### 01.12

> å­¦ä¹ æ—¶é—´ï¼š120 min

`kill` å‘½ä»¤ç»å¸¸ç”¨ï¼Œä½†æ˜¯ä¸çŸ¥é“ä½¿ç”¨ `-9` é€‰é¡¹æœ‰ä»€ä¹ˆä½œç”¨ï¼Œä¸‹é¢æ˜¯ GPT ç»™æˆ‘çš„ç­”æ¡ˆï¼š

> kill å‘½ä»¤å¯ä»¥å‘é€å¤šç§ä¿¡å·ç»™è¿›ç¨‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå‘é€ SIGTERM ä¿¡å·ï¼ˆä¿¡å·ç¼–å· 15ï¼‰ï¼Œè¿™æ˜¯è¯·æ±‚è¿›ç¨‹æ­£å¸¸ç»“æŸçš„ä¿¡å·ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ä¿¡å·ï¼š
>
> - SIGTERM (15)ï¼šè¯·æ±‚è¿›ç¨‹æ­£å¸¸ç»ˆæ­¢ï¼Œå…è®¸è¿›ç¨‹æ¸…ç†èµ„æºå’Œæ–‡ä»¶ç­‰ã€‚è¿›ç¨‹å¯ä»¥é€‰æ‹©å¿½ç•¥è¿™ä¸ªä¿¡å·ã€‚
> - SIGKILL (9)ï¼šå¼ºåˆ¶ç«‹å³ç»ˆæ­¢è¿›ç¨‹ï¼Œæ— æ³•è¢«è¿›ç¨‹æ•è·æˆ–å¿½ç•¥ã€‚é€šå¸¸ç”¨äºç»ˆæ­¢æ— æ³•æ­£å¸¸ç»“æŸçš„è¿›ç¨‹ã€‚
> - SIGINT (2)ï¼šé€šå¸¸ç”±ç”¨æˆ·é€šè¿‡æŒ‰ä¸‹ Ctrl + C å‘é€ç»™å‰å°è¿›ç¨‹ï¼Œç”¨äºä¸­æ–­è¿›ç¨‹ã€‚
> - SIGHUP (1)ï¼šé€šå¸¸ç”¨äºé€šçŸ¥è¿›ç¨‹é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œæˆ–è€…ç”±äºè¿æ¥ä¸¢å¤±è€Œç»ˆæ­¢è¿›ç¨‹ã€‚
> - SIGSTOP (19)ï¼šæš‚åœï¼ˆæŒ‚èµ·ï¼‰è¿›ç¨‹ï¼Œä¸èƒ½è¢«è¿›ç¨‹æ•è·æˆ–å¿½ç•¥ã€‚ä¸ SIGCONT ç›¸åï¼Œåè€…ç”¨äºæ¢å¤æš‚åœçš„è¿›ç¨‹ã€‚

> `SIGKILL` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä¿¡å·ï¼Œå®ƒä¸èƒ½è¢«è¿›ç¨‹æ•è·å¹¶ä¸”å®ƒä¼šé©¬ä¸Šç»“æŸè¯¥è¿›ç¨‹ã€‚ä¸è¿‡è¿™æ ·åšä¼šæœ‰ä¸€äº›å‰¯ä½œç”¨ï¼Œä¾‹å¦‚ç•™ä¸‹å­¤å„¿è¿›ç¨‹ã€‚ï¼ˆä¸çŸ¥é“ç«Ÿç„¶è¿˜ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ã€‚ï¼‰

---

`Ctrl-Z` ä¼šæš‚åœä¸€ä¸ªè¿›ç¨‹ã€‚

`fg` å’Œ `bg` å‘½ä»¤å¯ä»¥æ¢å¤æš‚åœçš„å·¥ä½œã€‚å®ƒä»¬åˆ†åˆ«è¡¨ç¤ºåœ¨å‰å°ç»§ç»­æˆ–åœ¨åå°ç»§ç»­ã€‚

`jobs` å‘½ä»¤ä¼šåˆ—å‡ºå½“å‰ç»ˆç«¯ä¼šè¯ä¸­å°šæœªå®Œæˆçš„å…¨éƒ¨ä»»åŠ¡ã€‚

---

**tmux ä½¿ç”¨ä¸é…ç½®**

ä¹‹å‰ç”¨è¿‡ä¸€æ®µæ—¶é—´ tmux ä½†æ˜¯è§‰å¾—æ“ä½œæŒºå¤æ‚ï¼Œå¹¶ä¸”æ²¡æœ‰é…ç½®å¥½ï¼Œå°±æ²¡æœ‰ä½¿ç”¨äº†ã€‚åé¢è¿˜æ˜¯åº”è¯¥ç”¨èµ·æ¥ã€‚

tmux å¿«é€Ÿå…¥é—¨æ•™ç¨‹ https://hamvocke.com/blog/a-quick-and-easy-guide-to-tmux/

---

**Dotfiles**

> æˆ‘ä»¬åº”è¯¥å¦‚ä½•ç®¡ç†è¿™äº›é…ç½®æ–‡ä»¶å‘¢ï¼Œå®ƒä»¬åº”è¯¥åœ¨å®ƒä»¬çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè¿›è¡Œç®¡ç†ï¼Œç„¶åé€šè¿‡è„šæœ¬å°†å…¶ ç¬¦å·é“¾æ¥ åˆ°éœ€è¦çš„åœ°æ–¹ã€‚

è¿™ä¹Ÿæ˜¯æˆ‘ç®¡ç†é…ç½®æ–‡ä»¶çš„æ–¹å¼ã€‚

**é…ç½®çš„å¯ç§»æ¤æ€§**

ä¹‹å‰æœ‰è€ƒè™‘è¿‡è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿæ˜¯è§‰å¾—å¤ªå¤æ‚äº†å°±æ²¡æœ‰å»å¼„

```shell
if [[ "$(uname)" == "Linux" ]]; then {do_something}; fi

# ä½¿ç”¨å’Œ shell ç›¸å…³çš„é…ç½®æ—¶å…ˆæ£€æŸ¥å½“å‰ shell ç±»å‹
if [[ "$SHELL" == "zsh" ]]; then {do_something}; fi

# æ‚¨ä¹Ÿå¯ä»¥é’ˆå¯¹ç‰¹å®šçš„è®¾å¤‡è¿›è¡Œé…ç½®
if [[ "$(hostname)" == "myServer" ]]; then {do_something}; fi
```

---

å…³äº ssh å¯†é’¥ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨ `ssh-copy-id` å‘½ä»¤æ¥å®ç°å…å¯†ç™»é™†ï¼Œå¯ä»¥é¿å…æ‰‹åŠ¨å¤åˆ¶é”™è¯¯å¯¼è‡´çš„é—®é¢˜ã€‚

---

å…³äºä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨ä¸­ï¼Œæˆ‘å‘ç°å±…ç„¶å¤§éƒ¨åˆ†äººè¿˜ä¸çŸ¥é“æœ‰ `scp` å‘½ä»¤ã€‚

---

pgrep ä¸ pkillï¼Œæˆ‘ä»¬ä¸ç”¨å…ˆå»æŸ¥è¿›ç¨‹å·ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡è¿›ç¨‹åæ¥æŸ¥æ‰¾ä¸ç»ˆæ­¢è¿›ç¨‹

---

ä½¿ç”¨ `dotfiles` ç®¡ç†é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ `ln -s` å»é“¾æ¥é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›ç”¨äºç®¡ç†é…ç½®æ–‡ä»¶çš„å·¥å…·ï¼šhttps://dotfiles.github.io/utilities/

---

**ssh å‚æ•°**

`-N` å°±æ˜¯ä¸æ‰§è¡Œè¿œç«¯å‘½ä»¤ï¼Œé€‚ç”¨äºç«¯å£è½¬å‘çš„æƒ…å†µï¼Œ`-f` æ˜¯è®© ssh åœ¨æ‰§è¡Œå‘½ä»¤å‰åˆ‡æ¢åˆ°åå°è¿è¡Œã€‚

åå°è¿›è¡Œç«¯å£è½¬å‘ `ssh -fN -L 9999:localhost:8888 user@remotehost`

---

**ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜**

> https://unix.stackexchange.com/questions/185793/why-is-it-while-kill-0-pid-and-not-until-kill-0-pid

æˆ‘ä»¬éœ€è¦æ˜ç¡®çš„æ˜¯ï¼š**åœ¨ Shell ä¸­ â€˜0â€™ è¡¨ç¤ºæˆåŠŸï¼Œéé›¶è¡¨ç¤ºå¤±è´¥**ã€‚

åœ¨ bash è„šæœ¬ä¸­ `while` å‘½ä»¤ä¸æ˜¯å¯»æ‰¾å¸ƒå°”å€¼ï¼Œè€Œæ˜¯å¯»æ‰¾è¿”å›ç  `0`ï¼Œè¿™è¡¨æ˜å‘½ä»¤æ‰§è¡ŒæˆåŠŸã€‚å› æ­¤ï¼Œåœ¨ `while` å‘½ä»¤çš„æƒ…å†µä¸‹ï¼Œè¿”å› `0` çš„å‘½ä»¤æ˜¯**çœŸ**ï¼Œå…¶ä»–ä»»ä½•å€¼éƒ½æ˜¯**å‡çš„**ã€‚

```bash
while compound-list-1
do
    compound-list-2
done
```

å°†æ‰§è¡Œ `compound-list-1`ï¼Œå¦‚æœå®ƒå…·æœ‰éé›¶é€€å‡ºçŠ¶æ€ï¼Œåˆ™ `while` å‘½ä»¤å°†å®Œæˆã€‚å¦åˆ™ï¼Œå°†æ‰§è¡Œ `compound-list-2`ï¼Œå¹¶é‡å¤è¯¥è¿‡ç¨‹ã€‚

### 01.13

> å­¦ä¹ æ—¶é—´ï¼š 60 min

---

```
feat	    æ–°ç‰¹æ€§ï¼Œæ–°åŠŸèƒ½
fix	      ä¿®bug
docs	    æ›´æ–°æ–‡æ¡£
style	    ä¿®æ”¹ä»£ç é£æ ¼ã€ä»£ç æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰
refactor	é‡æ„ä»£ç ï¼ˆæ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugï¼Œå¯ä»¥ç†è§£ä¸ºè§‰å¾—åŸæœ¬å†™å¤ªçƒ‚äº†ï¼Œé‡æ–°å†™äº†ä¸€éï¼‰
perf	    ä¼˜åŒ–æ€§èƒ½ã€ä¼˜åŒ–ä½“éªŒ
test	    æµ‹è¯•
chore	    æ„å»ºè¿‡ç¨‹æˆ–è€…è¾…åŠ©å·¥å…·çš„å˜åŠ¨
revert	  å›æ»šç‰ˆæœ¬
merge	    ä»£ç åˆå¹¶
sync	    åŒæ­¥ä¸»çº¿æˆ–åˆ†æ”¯
```

æ¯”è¾ƒå¥½ç”¨çš„ä¸€ä¸ªæŸ¥çœ‹æäº¤è®°å½•çš„å‘½ä»¤ `git log --graph --all --decorate --oneline`

---

ç®€å•æ¥è®²ï¼Œgit å­˜å‚¨çš„æ˜¯ `object` çš„æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼Œ

**åŸºæœ¬ç»“æ„**

```text
type blob = array<byte>

type tree = map<string, tree | blob>

type commit = struct {
    parents: array<commit>
    author: string
    message: string
    snapshot: tree
}

type object = blob | tree | commit
```

**å¯»å€ç»“æ„**

```text
objects = map<string, object>

def store(object):
    id = sha1(object)
    objects[id] = object

def load(id):
    return objects[id]
```

**å¼•ç”¨**

```text
references = map<string, string>

def update_reference(name, id):
    references[name] = id

def read_reference(name):
    return references[name]

def load_reference(name_or_id):
    if name_or_id in references:
        return load(references[name_or_id])
    else:
        return load(name_or_id)
```

> å½“æ‚¨è¾“å…¥æŸä¸ªæŒ‡ä»¤æ—¶ï¼Œè¯·æ€è€ƒä¸€ä¸‹è¿™æ¡å‘½ä»¤æ˜¯å¦‚ä½•å¯¹åº•å±‚çš„å›¾æ•°æ®ç»“æ„è¿›è¡Œæ“ä½œçš„ã€‚

---

å¦‚ä½•ç¼–å†™è‰¯å¥½çš„ git commit messageï¼šhttps://cbea.ms/git-commit/

---

ä¸€ä¸ªä½¿ç”¨ Rust å®ç°çš„è½»é‡ git é¡¹ç›®ï¼šhttps://github.com/MrBeanCpp/MIT

---

### 01.14

> å­¦ä¹ æ—¶é—´ï¼š60 min

å…ƒç¼–ç¨‹ï¼šç”¨äºæ“ä½œç¨‹åºçš„ç¨‹åº

æ— è®ºä½¿ç”¨ä»€ä¹ˆè¯­è¨€è¿›è¡Œå¼€å‘ï¼Œæˆ‘ä»¬çš„é¡¹ç›®éƒ½å°‘ä¸äº†ä¸€ä¸ªæ„å»ºçš„è¿‡ç¨‹ï¼Œè¿™é€šå¸¸æ¶‰åŠç¼–è¯‘ã€æ‰“åŒ…ã€æµ‹è¯•ä»¥åŠ benchmarkï¼Œç”¨æ¥å®Œæˆè¿™äº›æ­¥éª¤çš„å·¥å…·è¢«ç§°ä¸ºâ€œæ„å»ºç³»ç»Ÿâ€ã€‚

æˆ‘ä»¬çŸ¥é“ï¼Œå®é™…å¼€å‘å‰çš„ç¯å¢ƒæ­å»ºæ‰æ˜¯æœ€æŠ˜ç£¨çš„ï¼Œä¸€ä¸ªå¥½çš„è„šæ‰‹æ¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³å¼€å‘å‰æ­å»ºç¯å¢ƒçš„æ­¥éª¤ã€‚ä½†ä¸æ˜¯æ‰€æœ‰è¯­è¨€éƒ½æœ‰è¿™ç§è„šæ‰‹æ¶ï¼Œæˆ‘æœ€è¿‘å‘ç°äº†ä¸€ä¸ªå·¥å…· `cookiecutter`ï¼šhttps://github.com/cookiecutter/cookiecutterï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†å„ç§é¡¹ç›®çš„åˆå§‹åŒ–æ¨¡æ¿ã€‚

ä½†æˆ‘ç›®å‰åªå‘ç°äº†ä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„ python åˆå§‹åŒ–æ¨¡ç‰ˆï¼šhttps://github.com/pyloong/cookiecutter-pythonic-projectã€‚

ä¸‹é¢æ˜¯å®ƒçš„æ–‡æ¡£ï¼š

https://pyloong.github.io/pythonic-project-guidelines/quick_start/#252

https://pyloong.github.io/cookiecutter-pythonic-project/#git-per-commit

å…³äº typescript å¯ä»¥å‚è€ƒè¿™é‡Œï¼šhttps://simonboisset.com/blog/create-typescript-library-tsup

---

**è¯­ä¹‰åŒ–ç‰ˆæœ¬**

ä¹‹å‰ä¸€ç›´æƒ³æ€»ç»“è¯­ä¹‰åŒ–ç‰ˆæœ¬ç›¸å…³çš„å†…å®¹ï¼Œå€Ÿæ­¤æœºä¼šå°†æ”¶è—å¤¹é‡Œçš„æ–‡æ¡£ç¿»å‡ºæ¥æ•´ç†ã€‚

è¯­ä¹‰åŒ–ç‰ˆæœ¬æ ¼å¼ä¸ºï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼ˆ`X.Y.Z`ï¼‰å…¶ä¸­ `X`ã€`Y` å’Œ `Z` å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œ
**ä¸”ç¦æ­¢åœ¨æ•°å­—å‰æ–¹è¡¥é›¶**ã€‚

ç‰ˆæœ¬å·æŒ‰ä»¥ä¸‹è§„åˆ™é€’å¢ï¼š

- æ‰€æœ‰ç‰ˆæœ¬å·éƒ½ä»¥ `v` å¼€å¤´ã€‚
- ä¸»ç‰ˆæœ¬å·ï¼šå‘ç”Ÿäº†ä¸ä¹‹å‰ç‰ˆæœ¬ä¸å…¼å®¹çš„æ›´æ–°æ—¶ä¿®æ”¹ã€‚
- æ¬¡ç‰ˆæœ¬å·ï¼šå‘ç”Ÿäº†å‘ä¸‹å…¼å®¹çš„æ›´æ–°æ—¶ä¿®æ”¹ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªä¸æˆæ–‡çš„è§„å®šï¼šå¶æ•°ä¸ºç¨³å®šç‰ˆï¼Œå¥‡æ•°ä¸ºå¼€å‘ç‰ˆã€‚
- ä¿®è®¢å·ï¼šå‘ç”Ÿäº†å‘åå…¼å®¹çš„ `bug` ä¿®å¤æ—¶ä¿®æ”¹ã€‚

è¿˜æœ‰è¿™ä¹ˆä¸€ç§ç‰ˆæœ¬å· `v1.2.3-alpha`ï¼Œè¿™æ˜¯å°†å…ˆè¡Œç‰ˆæœ¬å·å’Œç‰ˆæœ¬ç¼–è¯‘å…ƒæ•°æ®ä½œä¸ºè¡¥å……æ·»åŠ åˆ°äº†ç‰ˆæœ¬å·ä¸­ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![version](./images/echozyr2001/version.png)

å…ˆè¡Œç‰ˆæœ¬å·æ„å‘³ç€è¯¥ç‰ˆæœ¬ä¸ç¨³å®šï¼Œå¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚ç¼–è¯‘ç‰ˆæœ¬å·ä¸€èˆ¬æ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œ
æˆ‘ä»¬åªå®šä¹‰å…¶æ ¼å¼ï¼Œå¹¶ä¸äººä¸ºæ§åˆ¶ã€‚

**è§„èŒƒ**

- ä»¥æ ‡è®°ç‰ˆæœ¬çš„è½¯ä»¶å‘å¸ƒåï¼Œç¦æ­¢æ”¹å˜å…¶å†…å®¹ï¼Œä»»ä½•ä¿®æ”¹éƒ½å¿…é¡»ä»¥æ–°çš„ç‰ˆæœ¬å‘å¸ƒã€‚
- ä¿®è®¢å·å¿…é¡»åœ¨åªåšäº†å‘ä¸‹å…¼å®¹çš„ `bug` ä¿®è®¢æ—¶æ‰é€’å¢ã€‚
- æ¬¡ç‰ˆæœ¬å·å¿…é¡»åœ¨æœ‰å‘ä¸‹å…¼å®¹çš„æ–°åŠŸèƒ½å‡ºç°æ—¶é€’å¢ã€‚å…¶ä¸­å¯ä»¥åŒ…æ‹¬ä¿®è®¢çº§åˆ«çš„æ”¹å˜ï¼Œæ¯å½“æ¬¡ç‰ˆæœ¬å·é€’å¢æ—¶ï¼Œä¿®å®šå·å¿…é¡»å½’é›¶ã€‚
- ä¸»ç‰ˆæœ¬å·å¿…é¡»åœ¨æœ‰ä»»ä½•ä¸å…¼å®¹çš„æ›´æ–°æ—¶é€’å¢ã€‚å…¶ä¸­å¯ä»¥åŒ…æ‹¬æ¬¡ç‰ˆæœ¬ä»¥åŠä¿®è®¢çº§åˆ«çš„æ”¹å˜ï¼Œæ¯å½“ä¸»ç‰ˆæœ¬å·é€’å¢æ—¶ï¼Œæ¬¡ç‰ˆæœ¬å·å’Œä¿®è®¢å·å¿…é¡»å½’é›¶ã€‚

**å®é™…å¼€å‘ä¸­å¦‚ä½•ç¡®å®šç‰ˆæœ¬å·**

ä¸€èˆ¬ä½¿ç”¨ `0.1.0` ä½œä¸ºç¬¬ä¸€ä¸ªå¼€å‘ç‰ˆæœ¬å·ï¼Œå½“è½¯ä»¶ç¨³å®šï¼Œä¸”ç¬¬ä¸€æ¬¡å¯¹å¤–å‘å¸ƒæ—¶ï¼Œç‰ˆæœ¬å·å¯ä»¥å®šä¸º `1.0.0` æ¯æ¬¡ä»£ç çš„æäº¤å¯ä»¥æŒ‰ç…§ä»¥ä¸‹è§„åˆ™ä¸ç‰ˆæœ¬å·å¯¹åº”ï¼š

1. `fix` ç±»å‹çš„æäº¤å¯ä»¥å°†ä¿®è®¢å· `+1`
2. `feat` ç±»å‹çš„æäº¤å¯ä»¥å°†æ¬¡ç‰ˆæœ¬å· `+1`
3. `BREAKING CHANGE` çš„æäº¤å¯ä»¥å°†ä¸»ç‰ˆæœ¬å· `+1`

---

`CI`ï¼šæŒç»­é›†æˆï¼Œä»£ç æäº¤åè‡ªåŠ¨è¿è¡Œä¸€ç³»åˆ—æµ‹è¯•ï¼Œä»¥ç¡®ä¿æ–°ä»£ç æ²¡æœ‰ç ´åç°æœ‰åŠŸèƒ½ã€‚

`CD`ï¼šæŒç»­äº¤ä»˜ï¼Œé€šè¿‡æµ‹è¯•ä¹‹åçš„ä»£ç è‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚

æœ‰ä¸€ç§ä¸“é—¨çš„å²—ä½å« `DevOps` å·¥ç¨‹å¸ˆï¼Œ`CI/CD` å°±æ˜¯ä»–ä»¬çš„æ ¸å¿ƒèŒè´£ã€‚

---

### 01.15

> å­¦ä¹ æ—¶é—´ï¼š40 min

å¯†ç æ•£åˆ—å‡½æ•°ï¼šhttps://en.wikipedia.org/wiki/Cryptographic_hash_functionï¼Œå¯ä»¥å°†ä»»æ„å¤§å°çš„æ•°æ®æ˜ å°„ä¸ºä¸€ä¸ªå›ºå®šå¤§å°çš„è¾“å‡ºã€‚æˆ‘ä¹‹å‰ä¸€ç›´æƒ³å®ç°ç±»ä¼¼çš„æ•ˆæœï¼ŒåŸæ¥å·²ç»æœ‰ç°æˆçš„å®ç°äº†ã€‚

**sha-1 sha-2 sha-3**

SHAï¼ˆå®‰å…¨å“ˆå¸Œç®—æ³•ï¼‰ç›®å‰ä¸»è¦æœ‰ä¸‰ä¸ªç‰ˆæœ¬ï¼š

1. **`sha-1`**
   ç”Ÿæˆå›ºå®šé•¿åº¦çš„ 160 ä½å“ˆå¸Œå€¼ã€‚ç”±äºç®—æ³•è®¾è®¡çš„å±€é™æ€§ï¼Œåœ¨ 2005 å¹´åå‘ç°äº†ä¸¥é‡çš„å®‰å…¨ç¼ºé™·ã€‚

2. **`sha-2`**
   åœ¨ `sha-1` çš„åŸºç¡€ä¸Šå¢åŠ äº†å®‰å…¨æ€§å’ŒæŠµå¾¡æ”»å‡»çš„èƒ½åŠ›ï¼ŒåŒ…å« `sha-224`ã€`sha-256`ã€`sha-384` å’Œ `sha-512` å¤šä¸ªç®—æ³•å˜ä½“ï¼Œæä¾›ä¸åŒçš„è¾“å‡ºé•¿åº¦ã€‚ç›®å‰è¢«å¹¿æ³›ä½¿ç”¨ã€‚

3. **`sha-3`**
   è®¾è®¡ä¸Šå®Œå…¨ç‹¬ç«‹äº `sha-1` å’Œ `sha-2`ï¼Œä¸å—å·²çŸ¥æˆ–æ½œåœ¨å¼±ç‚¹å½±å“ã€‚ç”±äºåœ¨å½“å‰æŠ€æœ¯æ¡ä»¶ä¸‹ï¼Œ`sha-3` å¹¶æ²¡æœ‰æ˜¾ç¤ºå‡ºæ˜æ˜¾çš„æ•ˆç‡ä¼˜åŠ¿ï¼Œä¸” `sha-2` ç›®å‰ä»è¶³å¤Ÿå®‰å…¨ï¼Œæ‰€ä»¥æ™®åŠé€Ÿåº¦è¾ƒæ…¢ã€‚ä½†å®ƒè¢«å¹¿æ³›æ¥å—ä¸ºæ›¿ä»£ `sha-2` çš„ä¸‹ä¸€ä»£å“ˆå¸Œç®—æ³•ã€‚

---

**ä¸º commit æ·»åŠ ç­¾å**

![commit](./images/echozyr2001/commit.png)

ä»¥ä¸‹å†…å®¹è®°å½•åœ¨æˆ‘çš„æ—§ç¬”è®°ä¸­ï¼Œä»…åšåˆ†äº«ï¼Œç›®å‰ä¸ä¸€å®šé€‚ç”¨ã€‚

1. ä½¿ç”¨ brew å®‰è£… gpg

```shell
brew install gpg
```

2. ç”Ÿæˆ GPG å¯†é’¥å¯¹

```shell
gpg --full-generate-key
```

3. åœ¨æç¤ºæ—¶ï¼ŒæŒ‡å®šè¦ç”Ÿæˆçš„å¯†é’¥ç±»å‹ï¼Œæˆ–æŒ‰ `Enter` é”®æ¥å—é»˜è®¤å€¼ã€‚

4. åœ¨æç¤ºæ—¶ï¼ŒæŒ‡å®šè¦ç”Ÿæˆçš„å¯†é’¥å¤§å°ï¼Œæˆ–æŒ‰ `Enter` é”®æ¥å—é»˜è®¤å€¼ã€‚

5. è¾“å…¥å¯†é’¥çš„æœ‰æ•ˆæ—¶é•¿ã€‚ æŒ‰ `Enter` é”®å°†æŒ‡å®šé»˜è®¤é€‰æ‹©ï¼Œè¡¨ç¤ºè¯¥å¯†é’¥ä¸ä¼šè¿‡æœŸã€‚ é™¤éä½ éœ€è¦è¿‡æœŸæ—¥æœŸï¼Œå¦åˆ™å»ºè®®æ¥å—æ­¤é»˜è®¤å€¼ã€‚

6. éªŒè¯æ‚¨çš„é€‰æ‹©æ˜¯å¦æ­£ç¡®ã€‚

7. è¾“å…¥æ‚¨çš„ç”¨æˆ· ID ä¿¡æ¯ã€‚

> ç¡®ä¿è¾“å…¥çš„æ˜¯ç”µå­é‚®ä»¶åœ°å€ ç»è¿‡éªŒè¯çš„GitHub å¸æˆ·ã€‚

8. è¾“å…¥å®‰å…¨å¯†ç ã€‚

9. åˆ—å‡ºä½ æ‹¥æœ‰å…¶å…¬é’¥å’Œç§é’¥çš„é•¿å½¢å¼ GPG å¯†é’¥ã€‚ ç­¾åæäº¤æˆ–æ ‡è®°éœ€è¦ç§é’¥ã€‚

```shell
gpg --list-secret-keys --keyid-format=long
```

10. ä» GPG å¯†é’¥åˆ—è¡¨ä¸­å¤åˆ¶æ‚¨æƒ³è¦ä½¿ç”¨çš„ GPG å¯†é’¥ ID çš„é•¿å½¢å¼ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼ŒGPG å¯†é’¥ ID ä¸º `3AA5C34371567BD2`

```shell
$ gpg --list-secret-keys --keyid-format=long
/Users/hubot/.gnupg/secring.gpg
------------------------------------
sec   4096R/3AA5C34371567BD2 2016-03-10 [expires: 2017-03-10]
uid                          Hubot <hubot@example.com>
ssb   4096R/4BB6D45482678BE3 2016-03-10
```

11. ç²˜è´´ä¸‹é¢çš„æ–‡æœ¬ï¼ˆæ›¿æ¢ä¸ºæ‚¨è¦ä½¿ç”¨çš„ GPG å¯†é’¥ IDï¼‰ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼ŒGPG å¯†é’¥ ID ä¸º `3AA5C34371567BD2`ï¼š

```shell
gpg --armor --export 3AA5C34371567BD2
# Prints the GPG key ID, in ASCII armor format
```

12. å¤åˆ¶ä»¥ `-----BEGIN PGP PUBLIC KEY BLOCK-----` å¼€å¤´å¹¶ä»¥ `-----END PGP PUBLIC KEY BLOCK-----` ç»“å°¾çš„ GPG å¯†é’¥ã€‚

**å°† GPG å¯†é’¥æ·»åŠ åˆ° GitHub å¸æˆ·**

1. è¿›å…¥è®¾ç½®

2. è¿›å…¥â€œSSH å’Œ GPG å¯†é’¥â€ã€‚

3. å•å‡»â€œæ–°å»º GPG å¯†é’¥â€

4. åœ¨â€œæ ‡é¢˜â€å­—æ®µä¸­é”®å…¥ GPG å¯†é’¥çš„åç§°

5. åœ¨â€œå¯†é’¥â€å­—æ®µä¸­ï¼Œç²˜è´´å¤åˆ¶çš„ GPG å¯†é’¥

6. å•å‡»â€œæ·»åŠ  GPG å¯†é’¥â€

**å°†æ‚¨çš„ç­¾åå¯†é’¥å‘ŠçŸ¥ Git**

1. å¦‚æœä¹‹å‰å·²å°† Git é…ç½®ä¸ºåœ¨ä½¿ç”¨ `--gpg-sign` ç­¾åæ—¶ä½¿ç”¨ä¸åŒçš„å¯†é’¥æ ¼å¼ï¼Œè¯·å–æ¶ˆè®¾ç½®æ­¤é…ç½®ï¼Œä»¥ä¾¿ä½¿ç”¨é»˜è®¤ `openpgp` æ ¼å¼ã€‚

```shell
git config --global --unset gpg.format
```

2. åˆ—å‡ºä½ æ‹¥æœ‰å…¶å…¬é’¥å’Œç§é’¥çš„é•¿å½¢å¼ GPG å¯†é’¥ã€‚ ç­¾åæäº¤æˆ–æ ‡è®°éœ€è¦ç§é’¥ã€‚

```shell
gpg --list-secret-keys --keyid-format=long
```

3. ä» GPG å¯†é’¥åˆ—è¡¨ä¸­å¤åˆ¶æ‚¨æƒ³è¦ä½¿ç”¨çš„ GPG å¯†é’¥ ID çš„é•¿å½¢å¼ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼ŒGPG å¯†é’¥ ID ä¸º `3AA5C34371567BD2`ï¼š

```shell
$ gpg --list-secret-keys --keyid-format=long
/Users/hubot/.gnupg/secring.gpg
------------------------------------
sec   4096R/3AA5C34371567BD2 2016-03-10 [expires: 2017-03-10]
uid                          Hubot <hubot@example.com>
ssb   4096R/4BB6D45482678BE3 2016-03-10
```

4. è‹¥è¦åœ¨ Git ä¸­è®¾ç½® GPG ç­¾åä¸»é”®ï¼Œè¯·ç²˜è´´ä¸‹é¢çš„æ–‡æœ¬ï¼Œæ›¿æ¢è¦ä½¿ç”¨çš„ GPG ä¸»é”® IDã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼ŒGPG å¯†é’¥ ID ä¸º `3AA5C34371567BD2`ï¼š

```shell
git config --global user.signingkey 3AA5C34371567BD2
```

5. å°† Git é…ç½®ä¸ºé»˜è®¤å¯¹æ‰€æœ‰æäº¤è¿›è¡Œç­¾åï¼ˆå¯é€‰ï¼‰

```shell
git config --global commit.gpgsign true
```

**å¯¹æäº¤ç­¾å**

1. å½“æœ¬åœ°åˆ†æ”¯ä¸­çš„æäº¤æ›´æ”¹æ—¶ï¼Œè¯·å°† S æ ‡å¿—æ·»åŠ åˆ° git commit å‘½ä»¤ï¼š

```shell
$ git commit -S -m "YOUR_COMMIT_MESSAGE"
# Creates a signed commit
```

2. å¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜

```shell
gpg: signing failed: Inappropriate ioctl for device
```

è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼ˆä»»é€‰å…¶ä¸€ï¼‰ï¼š

ä¸€ã€ä½¿ç”¨ GPG çš„ TTY æ¨¡å¼

- è®¾ç½® GPG ä½¿ç”¨ç»ˆç«¯ (TTY) æ¥æç¤ºè¾“å…¥ PINã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨ `~/.gnupg/gpg.conf` æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è¡Œæ¥å®ç°è¿™ä¸€ç‚¹ï¼š

```shell
use-agent
pinentry-mode loopback
```

- ç„¶åï¼Œåœ¨ `~/.gnupg/gpg-agent.conf` æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è¡Œï¼š

```shell
allow-loopback-pinentry
```

- ä¹‹åï¼Œé‡å¯ gpg-agentï¼š

```shell
gpg-connect-agent reloadagent /bye
```

äºŒã€ä½¿ç”¨`GPG_TTY`ç¯å¢ƒå˜é‡ï¼ˆæœªéªŒè¯ï¼‰

- åœ¨shell é…ç½®æ–‡ä»¶ä¸­ï¼ˆå¦‚ `~/.bashrc` æˆ– `~/.zshrc`ï¼‰ï¼Œæ·»åŠ ä»¥ä¸‹è¡Œï¼š

```shell
export GPG_TTY=$(tty)
```

- ç„¶åï¼Œé‡æ–°åŠ è½½ shell é…ç½®ï¼š

```shell
source ~/.bashrc æˆ– source ~/.zshrc
```

ä¸‰ã€ä½¿ç”¨ä¸éœ€è¦PINçš„GPGå¯†é’¥ï¼ˆæœªéªŒè¯ï¼‰

- å¦‚æœ GPG å¯†é’¥ä¸éœ€è¦ PINï¼Œå¯ä»¥å°è¯•ç”Ÿæˆä¸€ä¸ªä¸éœ€è¦ PIN çš„æ–°å¯†é’¥ï¼Œå¹¶åœ¨ Git ä¸­ä½¿ç”¨è¿™ä¸ªå¯†é’¥è¿›è¡Œç­¾åã€‚

3. åœ¨æœ¬åœ°å®Œæˆåˆ›å»ºæäº¤åï¼Œå°†å…¶æ¨é€åˆ° GitHub ä¸Šçš„è¿œç¨‹ä»“åº“ï¼š

```shell
$ git push
# Pushes your local commits to the remote repository
```

---

**é›¶çŸ¥è¯†è¯æ˜ï¼ˆZKPï¼‰**

åŒºå—é“¾æœ¬èº«çš„ä¸€ä¸ªå…³é”®ä¼˜åŠ¿å°±æ˜¯é€æ˜æ€§ï¼Œç„¶è€Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œä¸€äº›åˆçº¦å¤„äºå•†ä¸šæˆ–æ³•å¾‹å› ç´ éœ€è¦ä¿éšœæ•°æ®éšç§ã€‚åœ¨åŒºå—é“¾ä¸­é‡‡ç”¨ ZKP æŠ€æœ¯ï¼Œå¯ä»¥è¯æ˜æŸæ¡éšè—ä¿¡æ¯æ˜¯æœ‰æ•ˆä¸”ä¸ºè¯æ˜è€…æ‰€æ‹¥æœ‰çš„ã€‚

å¦‚æœè¦ç”¨ä¸€ä¸ªæ¦‚å¿µç›´è§‚åœ°è§£é‡Šé›¶çŸ¥è¯†è¯æ˜å¦‚ä½•è¯æ˜ç”¨æˆ·æ‹¥æœ‰æ•°æ®ï¼Œå¯ä»¥æƒ³è±¡ä¸€ä¸ªå±±æ´åªæœ‰ä¸€ä¸ªå…¥å£ï¼Œæ´é‡Œé¢æœ‰ä¸¤æ¡è·¯ï¼ˆè·¯å¾„Aå’Œè·¯å¾„Bï¼‰ï¼Œè¿™ä¸¤æ¡è·¯ç”±ä¸€æ‰‡é—¨è¿æ¥ï¼Œè¦è¯´å‡ºå¯†ç æ‰èƒ½é€šè¿‡è¿™æ‰‡é—¨ã€‚Alice å¸Œæœ›å‘ Bob è¯æ˜å¥¹çŸ¥é“å¼€é—¨çš„å¯†ç ï¼Œä½†ä¸æƒ³å°†å¯†ç é€éœ²ç»™ Bobã€‚

ä¸ºäº†å®Œæˆè¿™ä¸ªè¯æ˜ï¼ŒBob éœ€è¦ç«™åœ¨å±±æ´å¤–ï¼ŒAlice ä»å…¶ä¸­ä¸€æ¡è·¯èµ°è¿›å±±æ´ï¼Œè€Œ Bob å¹¶ä¸çŸ¥é“å¥¹é€‰äº†å“ªæ¡è·¯ã€‚æ¥ç€ï¼ŒBob æŒ‡å®š Alice ä»å…¶ä¸­ä¸€æ¡è·¯å›åˆ°å±±æ´å…¥å£ï¼ˆæ³¨ï¼šè¿™æ˜¯éšæœºé€‰æ‹©çš„ï¼‰ã€‚å¦‚æœ Alice æœ€åˆé€‰æ‹©ä»è·¯å¾„ A èµ°åˆ°é—¨å£ï¼Œä½† Bob è®©å¥¹ä»è·¯å¾„ B å›æ¥ï¼Œå”¯ä¸€çš„æ–¹æ³•å°±æ˜¯ç©¿è¿‡é‚£æ‰‡é—¨ï¼Œè€Œç©¿è¿‡é—¨å¿…é¡»çŸ¥é“å¯†ç ã€‚ä¸ºäº†å……åˆ†è¯æ˜ Alice çœŸçš„çŸ¥é“é—¨çš„å¯†ç ï¼Œè€Œä¸æ˜¯è¿æ°”å¥½åˆšå¥½é€‰åˆ°äº†åŒä¸€æ¡è·¯ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥åå¤é‡å¤å¥½å‡ æ¬¡ã€‚

è¿™ä¸€æ­¥æ“ä½œå®Œæˆåï¼ŒBob å°±å¯ä»¥éå¸¸ç¡®ä¿¡ Alice çŸ¥é“é—¨çš„å¯†ç ï¼Œä¸æ­¤åŒæ—¶ Alice ä¹Ÿä¸ç”¨å‘ Bob é€éœ²å¯†ç æ˜¯ä»€ä¹ˆã€‚

zkSyncï¼šhttps://zksync.io/ï¼Œé€šè¿‡ `zkRollup` æŠ€æœ¯æ”¯æŒçš„ä»¥å¤ªåŠäºŒå±‚ç½‘ç»œæ‰©å±•ã€‚

Aleoï¼šhttps://aleo.org/ï¼Œç¬¬ä¸€æ¡ä½¿ç”¨é›¶çŸ¥è¯†è¯æ˜æŠ€æœ¯çš„å…¬é“¾ã€‚

---

### 01.16

> å­¦ä¹ æ—¶é—´ï¼š20 min

ä»Šå¤©å¤§éƒ¨åˆ†æ—¶é—´èŠ±åœ¨äº†å¼€å‘è‡ªåŠ¨ `notify` æœºå™¨äººä¸Šï¼Œç„¶åå¿«é€Ÿå°†ä¹‹å‰è·³è¿‡çš„ä¸€äº›å†…å®¹è¿‡äº†ä¸€éï¼Œæ¯”è¾ƒç®€å•ä¸”ä»¥å®æ“ä¸ºä¸»ï¼Œæ²¡æœ‰ä»€ä¹ˆå€¼å¾—è®°å½•çš„ä¸œè¥¿ï¼Œä»Šå¤©å°±æ‘¸äº†ã€‚

### 01.17

> å­¦ä¹ æ—¶é—´ï¼š60 min

åœ¨çœ‹æœ€åå¤§æ‚çƒ©éƒ¨åˆ†çš„æ—¶å€™çœ‹åˆ°äº† `FUSE` çš„å†…å®¹ï¼Œæˆ‘è‡ªå·±åœ¨ç»¼åˆè¯¾è®¾ä¸‰åšçš„å°±æ˜¯ `FUSE` çš„ç›¸å…³å†…å®¹ï¼Œè¿™é‡Œå°±æ•´ç†ä¸€ä¸‹å½“æ—¶æ‰€åšçš„å†…å®¹å§ã€‚

`FUSE` å³ç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿï¼ˆFilesystem in User-Spaceï¼‰å…è®¸ç”¨æˆ·åœ¨ç”¨æˆ·ç©ºé—´è€Œéå†…æ ¸ç©ºé—´å®ç°æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™æ ·å¯ä»¥é™ä½å¼€å‘éš¾åº¦ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†å› å†…æ ¸ç©ºé—´çš„é”™è¯¯æ“ä½œå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚

ä½†æ˜¯ `FUSE` åœ¨å®é™…çš„åº”ç”¨ä¸­å­˜åœ¨è¾ƒå¤§çš„æ€§èƒ½ç“¶é¢ˆã€‚ç”±äº `FUSE` çš„å¤§éƒ¨åˆ†æ“ä½œå‘ç”Ÿåœ¨ç”¨æˆ·æ€ï¼Œä½†æ˜¯åƒ `inode` è¿™æ ·çš„æ–‡ä»¶æ•°æ®ä¾ç„¶åªæœ‰å†…æ ¸èƒ½å¤Ÿæ“ä½œï¼Œäºæ˜¯åœ¨ç”¨æˆ·æ€ä¸å†…æ ¸æ€ä¹‹é—´å­˜åœ¨å¤§é‡çš„æ•°æ®æ‹·è´æ¶ˆè€— `CPU` ç®—åŠ›ï¼Œå¯¼è‡´ `FUSE` çš„æ€§èƒ½è¡¨ç°ä¸ä½³ã€‚

ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Linux å†…æ ¸çš„æ–°ç‰¹æ€§ `eBPF` æ¥æé«˜æ•°æ®ä¼ è¾“çš„æ•ˆç‡ã€‚`eBPF` å…è®¸ç”¨æˆ·åœ¨å†…æ ¸ä¸­å®‰å…¨åœ°è¿è¡Œè‡ªå®šä¹‰é€»è¾‘ï¼Œè€Œæ— éœ€ä¿®æ”¹å†…æ ¸ä»£ç ï¼Œåˆ©ç”¨ `eBPF` å¯ä»¥å®ç°åœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´å…±äº«æ•°æ®è€Œæ— éœ€å†…å­˜æ‹·è´ï¼Œè¿™ä¸ºå®ç°é«˜æ€§èƒ½ç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿæ¥å£æä¾›äº†å¯èƒ½ã€‚

ä¸ºäº†æ·±å…¥ç†è§£ `FUSE` çš„æ€§èƒ½ç‰¹ç‚¹ä»¥åŠæ½œåœ¨çš„ä¼˜åŒ–ç©ºé—´ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¹åŸºäº `FUSE` å®ç°çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œæµç¨‹è¿›è¡Œåˆ†æã€‚

`SSHF` æ˜¯åŸºäº `FUSE` æ¥å£å’Œ `SSH` åè®®å®ç°çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒå…è®¸ç”¨æˆ·é€šè¿‡å®‰å…¨çš„åŠ å¯†é€šé“è¿œç¨‹æŒ‚è½½å’Œè®¿é—®è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿã€‚ä¸‹é¢æ˜¯åœ¨ `SSHFS` ä¸Šä½¿ç”¨ `ls` å‘½ä»¤åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶å’Œå­ç›®å½•çš„è¿‡ç¨‹ã€‚

![sshfs](./images/echozyr2001/sshfs.png)

`FUSE` æ¥å£å…¶å®æ˜¯ä¸€ä¸ªç®€å•çš„**å®¢æˆ·ç«¯-æœåŠ¡å™¨**åè®®ï¼Œå®ƒçš„å®¢æˆ·ç«¯æ˜¯å†…æ ¸ï¼Œç”¨æˆ·æ€çš„å®ˆæŠ¤è¿›ç¨‹å°±æ˜¯æœåŠ¡ç«¯ï¼Œå†…æ ¸æ¨¡å—ä¼šé€šè¿‡ `VFS` æš´éœ² `/dev/fuse` è®¾å¤‡æ–‡ä»¶ï¼Œè¿™ä¸ªè™šæ‹Ÿè®¾å¤‡æ–‡ä»¶å°±æ˜¯å†…æ ¸æ¨¡å—å’Œç”¨æˆ·ç¨‹åºçš„æ•°æ®é€šè·¯ã€‚

æ‰€è°“**ç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿ**ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ `data` å’Œ `metdata` éƒ½æ˜¯ç”±ç”¨æˆ·æ€çš„è¿›ç¨‹è€Œä¸æ˜¯å†…æ ¸æä¾›çš„ï¼ˆè¿™ç§è¿›ç¨‹ä¹Ÿå°±æ˜¯ `deamon`ï¼‰ã€‚

ä½†æ˜¯ç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿå¹¶ä¸ä»£è¡¨å…¶å®Œå…¨ä¸éœ€è¦å†…æ ¸çš„å‚ä¸ï¼Œå› ä¸ºåœ¨ Linux ä¸­ï¼Œå¯¹æ–‡ä»¶çš„è®¿é—®éƒ½æ˜¯ç»Ÿä¸€é€šè¿‡ `VFS` å±‚æä¾›çš„å†…æ ¸æ¥å£è¿›è¡Œçš„ã€‚åŸºæœ¬æµç¨‹å¯ç†è§£å¦‚ä¸‹ï¼š

1. å½“ä¸€ä¸ªè¿›ç¨‹è®¿é—®æ–‡ä»¶æ—¶ï¼Œé€šè¿‡åŸºæœ¬åº“ `glibc` è°ƒç”¨ç³»ç»Ÿè°ƒç”¨å°†è¯·æ±‚ä¼ é€’ç»™å†…æ ¸ `VFS`ã€‚
2. ç”± `VFS` åˆ¤æ–­è¯·æ±‚å±äºæŸä¸ªç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶å°†è¯·æ±‚è½¬å‘ç»™å†…æ ¸ `FUSE` æ¨¡å—ã€‚
3. `FUSE` æ¨¡å—å°†è¯·æ±‚è½¬æ¢ä¸ºä¸ `deamon` çº¦å®šçš„åè®®æ ¼å¼ä¼ é€’ç»™ `deamon` è¿›ç¨‹ã€‚
4. `deamon` è¿›ç¨‹é€šè¿‡ç”¨æˆ·æ€åº“ `libfuse` è§£æè¯·æ±‚å¹¶å¤„ç†ã€‚å¤„ç†ä¹‹åï¼Œå“åº”åŸè·¯è¿”å›ã€‚

æˆ‘ä»¬æ¥ä¸‹æ¥åˆ†æ `eBPF` çš„å®ç°åŸç†ï¼š

![ebpf](./images/echozyr2001/ebpf.png)

æˆ‘ä»¬é¦–å…ˆéœ€è¦åœ¨ç”¨æˆ·æ€ç¼–å†™ `eBPF` å†…æ ¸ç¨‹åºï¼Œå¹¶é€šè¿‡ `lang` ä¸ `llvm` ç¼–è¯‘ä¸º `BPF` å­—èŠ‚ç ã€‚ä¸‹ä¸€æ­¥æ˜¯å°†è¿™ä¸ªå­—èŠ‚ç åŠ è½½åˆ°å†…æ ¸ä¸­ä»¥ä¾›æ‰§è¡Œã€‚è¿™ä¸ªè¿‡ç¨‹é€šå¸¸ç”± `eBPF` ç”¨æˆ·ç¨‹åºå®Œæˆï¼Œå®ƒåˆ©ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„ `libbpf` åº“æ¥ä¸å†…æ ¸è¿›è¡Œäº¤äº’ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š

1. `eBPF` ç”¨æˆ·ç¨‹åºé€šè¿‡ `libbpf` åº“å°è£…çš„ `bpf()` å‡½æ•°å‘èµ·ç³»ç»Ÿè°ƒç”¨ï¼Œå°† `BPF` å­—èŠ‚ç åŠ è½½åˆ°å†…æ ¸ `BPF Verifier` æ¨¡å—ä¸­ã€‚è¯¥æ¨¡å—è´Ÿè´£æ£€æŸ¥ `BPF` å­—èŠ‚ç çš„æ­£ç¡®æ€§å’Œå®‰å…¨æ€§ï¼Œä»¥é˜²æ­¢æ¶æ„ä»£ç ç ´åå†…æ ¸ç¨³å®šæ€§ã€‚
2. é€šè¿‡éªŒè¯çš„å­—èŠ‚ç å°†è¢«ä¼ é€’ç»™ `JIT Compiler` æ¨¡å—ï¼Œè¯¥æ¨¡å—å°†å­—èŠ‚ç ç¼–è¯‘ä¸ºæœºå™¨ç ï¼Œä»¥ä¾¿åœ¨å†…æ ¸ä¸­æ‰§è¡Œï¼Œè¯¥æœºå™¨ç éµå¾ª `eBPF` æŒ‡ä»¤é›†ï¼Œå¹¶å°†æœºå™¨ç ä¸ç”¨æˆ·æŒ‡å®šçš„å‡½æ•°ã€ç³»ç»Ÿè°ƒç”¨æˆ–æ•°æ®é€šè·¯å…³è”èµ·æ¥ã€‚å½“å†…æ ¸æ‰§è¡Œåˆ°å…³è”ç‚¹æ—¶ï¼Œ`eBPF` å†…æ ¸ç¨‹åºå°†ä¼šè¢«è§¦å‘å¹¶æ‰§è¡Œã€‚

åŒæ—¶å†…æ ¸æ¨¡å—ä¼šåœ¨å†…æ ¸ä¸­ç»´æŠ¤ä¸€ä¸ª `maps` æ˜ å°„è¡¨é›†åˆï¼Œè¿™äº›é›†åˆç”±è‹¥å¹²å“ˆå¸Œè¡¨ç»„æˆã€‚`maps` æä¾›äº†ä¸€ç§åœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´å…±äº«æ•°æ®çš„æœºåˆ¶ã€‚ç”¨æˆ·æ€ç¨‹åºå¯ä»¥é€šè¿‡ `libbpf` åº“ç›´æ¥è®¿é—® `maps` ä¸­çš„å†…å®¹ï¼Œå®ç°ç”¨æˆ·æ€ä¸å†…æ ¸æ€ä¹‹é—´çš„æ•°æ®å…±äº«å’Œäº¤äº’ã€‚

è¿™é‡Œè·³è¿‡æ¯ç‡¥çš„èµ„æ–™æŸ¥é˜…è¿‡ç¨‹ï¼Œç›´æ¥ç»™å‡ºç»“è®ºï¼Œ`getattr()` å’Œ `getxattr()` å‡½æ•°æ˜¯æ€§èƒ½ç“¶é¢ˆçš„å…³é”®å› ç´ ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºè·å–æ–‡ä»¶æˆ–ç›®å½•çš„åŸºæœ¬å±æ€§ä¿¡æ¯å’Œæ‰©å±•å±æ€§ä¿¡æ¯ã€‚è¿™ä¸¤ä¸ªå‡½æ•°çš„é¢‘ç¹è°ƒç”¨ä¼šå¯¼è‡´å¤§é‡çš„ç³»ç»Ÿè°ƒç”¨å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä»è€Œé™ä½æ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚é€šè¿‡ `eBPF` æŠ€æœ¯ï¼Œå¯ä»¥åœ¨å†…æ ¸ä¸­æ‹¦æˆªå’Œå¤„ç†ç›¸å…³æ“ä½œï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„ `getattr()` å’Œ `getxattr()` å‡½æ•°è°ƒç”¨ã€‚

å…·ä½“è€Œè¨€ï¼Œä¸ºäº†å‡å°‘ `getattr()` å’Œ `getxattr()` å‡½æ•°çš„æ‰§è¡Œæ¬¡æ•°ï¼Œå¯ä»¥åˆ©ç”¨ `eBPF` çš„ `maps` æœºåˆ¶åˆ†åˆ«ç»´æŠ¤ä¸¤ä¸ªæ˜ å°„è¡¨ã€‚è¿™æ ·çš„æ˜ å°„è¡¨å¯ä»¥ç”¨äºå­˜å‚¨å·²ç»è·å–è¿‡çš„æ–‡ä»¶æˆ–ç›®å½•çš„åŸºæœ¬å±æ€§ä¿¡æ¯å’Œæ‰©å±•å±æ€§ä¿¡æ¯ã€‚

é€šè¿‡ç¼–å†™ç›¸åº”çš„ `eBPF` ç¨‹åºï¼Œå¹¶å°†å…¶æŒ‚è½½åˆ° `getattr()` å’Œ `getxattr()` å‡½æ•°ä¸Šã€‚å½“éœ€è¦è·å–æ–‡ä»¶æˆ–ç›®å½•çš„åŸºæœ¬å±æ€§ä¿¡æ¯æˆ–æ‰©å±•å±æ€§ä¿¡æ¯æ—¶ï¼Œé¦–å…ˆåœ¨æ˜ å°„è¡¨ä¸­æŸ¥æ‰¾ç›¸åº”çš„æ¡ç›®ã€‚å¦‚æœå·²ç»å­˜åœ¨äºæ˜ å°„è¡¨ä¸­ï¼Œå°±å¯ä»¥ç›´æ¥ä»æ˜ å°„è¡¨ä¸­è·å–æ‰€éœ€çš„å±æ€§ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å†æ¬¡æ‰§è¡Œè¿™ä¸¤ä¸ªå‡½æ•°ã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆå‡å°‘å‡½æ•°çš„è°ƒç”¨æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æ–‡ä»¶æˆ–ç›®å½•çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¾‹å¦‚æ–‡ä»¶å¤§å°ã€ä¿®æ”¹æ—¶é—´æˆ–æ‰©å±•å±æ€§çš„æ›´æ–°ï¼Œéœ€è¦åŠæ—¶æ›´æ–°æ˜ å°„è¡¨ä¸­çš„å¯¹åº”ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡äº‹ä»¶è§¦å‘æœºåˆ¶æˆ–å‘¨æœŸæ€§æ£€æŸ¥æ¥å®ç°å¯¹æ˜ å°„è¡¨çš„æ›´æ–°ï¼Œç¡®ä¿æ˜ å°„è¡¨ä¸­å­˜å‚¨çš„å±æ€§ä¿¡æ¯ä¸å®é™…æ–‡ä»¶ç³»ç»Ÿçš„å±æ€§ä¿æŒä¸€è‡´ã€‚

ä¸‹é¢æ˜¯ä¼˜åŒ–åçš„ç³»ç»Ÿæ¶æ„ï¼š

![final](./images/echozyr2001/final.png)

ä¸»è¦åŒ…æ‹¬ä¸‰å¤§æ¨¡å—çš„è®¾è®¡ï¼šç”¨æˆ·æ€ä¸»æ§æ¨¡å—ã€å‡½æ•°è°ƒç”¨æ‹¦æˆªæ¨¡å—å’Œå…±äº«æ•°æ® `maps` æ˜ å°„æ¨¡å—ã€‚

**ç”¨æˆ·æ€ä¸»æ§æ¨¡å—**ï¼šè¯¥æ¨¡å—è´Ÿè´£æ•´ä¸ªç³»ç»Ÿçš„æ§åˆ¶å’Œåè°ƒã€‚åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œç”¨æˆ·æ€ä¸»æ§æ¨¡å—é¦–å…ˆåŠ è½½ç»è¿‡ç¼–è¯‘çš„ `eBPF` å­—èŠ‚ç åˆ°å†…æ ¸ï¼Œå¹¶å°†å…¶æŒ‚è½½åœ¨ `getattr()` å’Œ `getxattr()` å‡½æ•°ä¸Šã€‚é€šè¿‡ä¸å†…æ ¸è¿›è¡Œæ•°æ®äº¤æµï¼Œç”¨æˆ·æ€ä¸»æ§æ¨¡å—å®ç°æ–‡ä»¶ç³»ç»Ÿçš„åŸºæœ¬åŠŸèƒ½ï¼Œå¹¶å……å½“ç”¨æˆ·æ€å®ˆæŠ¤è¿›ç¨‹ï¼Œç­‰å¾…ç”¨æˆ·æ“ä½œå’Œè¯·æ±‚ã€‚

**å‡½æ•°è°ƒç”¨æ‹¦æˆªæ¨¡å—**ï¼šè¯¥æ¨¡å—å°†è¢«ç¼–è¯‘ä¸º `BPF` å­—èŠ‚ç ç­‰å¾…ä¸»æ§æ¨¡å—æŒ‚è½½ã€‚å½“ `getattr()` æˆ– `getxattr()` å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå‡½æ•°è°ƒç”¨æ‹¦æˆªæ¨¡å—ä¸å…±äº«æ•°æ®æ˜ å°„æ¨¡å—è¿›è¡Œäº¤äº’ã€‚é€šè¿‡æŸ¥è¯¢æ–‡ä»¶ï¼ˆæˆ–ç›®å½•ï¼‰çš„ `inode` å±æ€§ï¼Œå‡½æ•°è°ƒç”¨æ‹¦æˆªæ¨¡å—åœ¨å…±äº«æ•°æ®æ˜ å°„æ¨¡å—ä¸­æŸ¥æ‰¾ç›¸åº”çš„æ˜ å°„è¡¨æ¡ç›®ï¼Œå¹¶æ ¹æ®æŸ¥æ‰¾ç»“æœå†³å®šæ˜¯å¦æ‹¦æˆªå‡½æ•°è°ƒç”¨æˆ–æ”¾è¡Œå‡½æ•°è°ƒç”¨ã€‚

**å…±äº«æ•°æ® `maps` æ˜ å°„æ¨¡å—**ï¼šè¯¥æ¨¡å—ä½œä¸ºç”¨æˆ·æ€ä¸å†…æ ¸æ€ä¹‹é—´æ•°æ®äº¤äº’çš„æ¡¥æ¢ï¼Œè´Ÿè´£ç»´æŠ¤æ˜ å°„è¡¨ä»¥å®ç°æ•°æ®çš„å…±äº«å’Œè®¿é—®ã€‚å½“å‡½æ•°è°ƒç”¨è¢«æ‹¦æˆªæ—¶ï¼Œå…±äº«æ•°æ®æ˜ å°„æ¨¡å—æ ¹æ®æ–‡ä»¶çš„ `inode` å±æ€§è¿”å›ç›¸åº”çš„ä¿¡æ¯ç»™å‡½æ•°è°ƒç”¨æ‹¦æˆªæ¨¡å—ã€‚åŒæ—¶ï¼Œå½“æ–‡ä»¶çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå…±äº«æ•°æ®æ˜ å°„æ¨¡å—ä»ç”¨æˆ·æ€è·å–æœ€æ–°çš„å±æ€§ä¿¡æ¯ï¼Œå¹¶æ ¹æ®æ–‡ä»¶çš„ `inode` å±æ€§æ›´æ–°æ˜ å°„è¡¨ä¸­ç›¸åº”çš„æ¡ç›®ã€‚

ä¸Šé¢çš„è®¾è®¡è¿˜åœç•™åœ¨ç†è®ºé˜¶æ®µï¼Œå…·ä½“å®ç°æ²¡æœ‰å®Œæˆï¼Œå¤§å®¶æ„Ÿå…´è¶£çš„è¯å¯ä»¥å°è¯•å®ç°æˆ–ä¼˜åŒ–ã€‚

### 01.18

> å­¦ä¹ æ—¶é—´ï¼š120 min

èŠ±è´¹ä¸¤ä¸ªå°æ—¶é…ç½® `neovim`ï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜ `lsp` æ’ä»¶æ‰¾ä¸åˆ° `tsserver`ï¼Œå¡äº†å¾ˆä¹…éƒ½æ²¡æ³•è§£å†³ï¼Œç»“æœæŸ¥æ–‡æ¡£å‘ç°æ˜¯åå­—å†™é”™äº†ï¼Œåº”è¯¥æ˜¯ `ts_ls`ï¼Œé‰´å®šä¸ºå¤ªä¹…æ²¡ç”¨ `neovim` è¢« `vscode` æ±¡æŸ“æ€ç»´äº†ã€‚

### 01.19

> å­¦ä¹ æ—¶é—´ï¼š60 min

è™½ç„¶ä¸»è¦å†…å®¹å·²ç»çœ‹å®Œäº†ï¼Œä½† 21 å¤©çš„å®‰æ’è¿˜æ˜¯éœ€è¦æœ‰å§‹æœ‰ç»ˆï¼Œåé¢åº”è¯¥ä¸»è¦å…³æ³¨åœ¨å„ç§å·¥å…·çš„é…ç½®ä¸Šã€‚

ä»Šå¤©ä¾ç„¶æ˜¯åœ¨é…ç½® `neovim`ï¼Œç»è¿‡ä¸¤å¤©çš„é…ç½®ï¼ŒåŸºæœ¬çš„æ–‡ä»¶æµè§ˆå™¨ã€è¯­æ³•æ£€æŸ¥ã€è‡ªåŠ¨è¡¥å…¨éƒ½å·²ç»é…ç½®å¥½äº†ï¼Œç°åœ¨çš„æ•ˆæœå¦‚å›¾æ‰€ç¤ºã€‚

![neovim1](./images/echozyr2001/neovim1.png)

![neovim2](./images/echozyr2001/neovim2.png)

### 01.20

> å­¦ä¹ æ—¶é—´ï¼š90 minutes

ç»§ç»­è¿›è¡Œ `neovim` çš„é…ç½®ï¼Œä¸»è¦æ˜¯ä¼˜åŒ–äº†åŸºæœ¬è®¾ç½® `options` å’Œå¿«æ·é”® `keymaps`

```lua
-- options.lua

local opt = vim.opt

opt.relativenumber = true -- set relative numbered lines
opt.number = true -- Make line numbers default

opt.tabstop = 4 -- insert n spaces for a tab
opt.shiftwidth = 4 -- the number of spaces inserted for each indentation
opt.expandtab = true -- convert tabs to spaces
opt.autoindent = true -- copy indent from current line when starting new one

opt.wrap = false -- display lines as one long line

opt.ignorecase = true -- Case-insensitive searching UNLESS \C or capital in search
opt.smartcase = true -- smart case

opt.cursorline = true -- highlight the current line

opt.termguicolors = true -- set termguicolors to enable highlight groups

opt.background = "dark" -- colorschemes that can be light or dark will be dark
opt.signcolumn = "yes" -- Keep signcolumn on by default

opt.backspace = "indent,eol,start" -- allow backspace on

opt.clipboard:append("unnamedplus") -- Sync clipboard between OS and Neovim.

opt.splitright = true -- force all vertical splits to go to the right of current window
opt.splitbelow = true -- force all horizontal splits to go below current window

vim.o.hlsearch = false -- Set highlight on search
vim.o.mouse = "a" -- Enable mouse mode
vim.o.breakindent = true -- Enable break indent
vim.o.undofile = true -- Save undo history
vim.o.updatetime = 250 -- Decrease update time
vim.o.timeoutlen = 300 -- time to wait for a mapped sequence to complete (in milliseconds)
vim.o.backup = false -- creates a backup file
vim.o.writebackup = false -- if a file is being edited by another program (or was written to file while editing with another program), it is not allowed to be edited
vim.o.completeopt = "menuone,noselect" -- Set completeopt to have a better completion experience
vim.o.whichwrap = "bs<>[]hl" -- which "horizontal" keys are allowed to travel to prev/next line
vim.o.linebreak = true -- companion to wrap don't split words
vim.o.scrolloff = 4 -- minimal number of screen lines to keep above and below the cursor
vim.o.sidescrolloff = 8 -- minimal number of screen columns either side of cursor if wrap is `false`
vim.o.numberwidth = 4 -- set number column width to 2 {default 4}
vim.o.softtabstop = 4 -- Number of spaces that a tab counts for while performing editing operations
vim.o.swapfile = false -- creates a swapfile
vim.o.smartindent = true -- make indenting smarter again
vim.o.showmode = false -- we don't need to see things like -- INSERT -- anymore
vim.o.showtabline = 2 -- always show tabs
vim.o.pumheight = 10 -- pop up menu height
vim.o.conceallevel = 0 -- so that `` is visible in markdown files
vim.o.fileencoding = "utf-8" -- the encoding written to a file
vim.o.cmdheight = 1 -- more space in the neovim command line for displaying messages
vim.opt.shortmess:append("c") -- don't give |ins-completion-menu| messages
vim.opt.iskeyword:append("-") -- hyphenated words recognized by searches
vim.opt.formatoptions:remove({ "c", "r", "o" }) -- don't insert the current comment leader automatically for auto-wrapping comments using 'textwidth', hitting <Enter> in insert mode, or hitting 'o' or 'O' in normal mode.
vim.opt.runtimepath:remove("/usr/share/vim/vimfiles") -- separate vim plugins from neovim in case vim still in use
```

```lua
-- keymaps.lua

-- leader key
vim.g.mapleader = " "
vim.g.maplocalleader = " "

-- for conciseness
local keymap = vim.keymap

-- Press jk fast to exit insert mode
keymap.set("i", "jk", "<ESC>", { desc = "Exit insert mode with jk" })

keymap.set("n", "<leader>nh", "<cmd>nohl<CR>", { desc = "Clear search highlights" })

-- disable the spacebar key's default bebavior in n and v modes
keymap.set({ "n", "v" }, "<Space>", "<Nop>", { silent = true })

-- window
keymap.set("n", "<leader>sv", "<C-w>v", { desc = "Split window vertically" })
keymap.set("n", "<leader>sh", "<C-w>s", { desc = "Split window horizontally" })
keymap.set("n", "<leader>se", "<C-w>=", { desc = "Make splits equal size" })
keymap.set("n", "<leader>sx", "<cmd>close<CR>", { desc = "Close current split" })

-- save file
vim.keymap.set("n", "<C-s>", "<cmd> w <CR>")

-- disable copy into register
vim.keymap.set("n", "x", '"_x')

-- save file without auto-formatting
vim.keymap.set("n", "<leader>sn", "<cmd> noautocmd w <CR>")

-- quit file
vim.keymap.set("n", "<C-q>", "<cmd> q <CR>")

-- find and center
vim.keymap.set("n", "n", "nzzzv")
vim.keymap.set("n", "N", "Nzzzv")

-- -- resize
-- vim.keymap.set('n', '<Up>', '<cmd> resize -2 <CR>', opts)
-- vim.keymap.set('n', '<Down>', '<cmd> resize +2 <CR>', opts)
-- vim.keymap.set('n', '<Left>', '<cmd> vertical resize -2 <CR>', opts)
-- vim.keymap.set('n', '<Right>', '<cmd> vertical resize +2 <CR>', opts)
--
-- -- buffers
-- vim.keymap.set('n', '<Tab>', '<cmd> bnext <CR>', opts)
-- vim.keymap.set('n', '<S-Tab>', '<cmd> bprevious <CR>', opts)
-- vim.keymap.set('n', '<leader>x', '<cmd> Bdelete! <CR>', opts)
-- vim.keymap.set('n', '<leader>b', '<cmd> enew <CR>', opts)
--

-- toggle line wrapping
vim.keymap.set("n", "<leader>lw", "<cmd> set wrap! <CR>", opts)
```

### 01.20

> å­¦ä¹ æ—¶é—´ï¼š30 min

ä»Šå¤©å°† `tmux` é…ç½®å¥½äº†

```text
set -g default-terminal "screen-256color"

set -g prefix C-a
unbind C-b
bind-key C-a send-prefix

unbind %
bind | split-window -h

unbind '"'
bind - split-window -v

unbind r
bind r source-file ~/.tmux.conf

bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5
bind -r h resize-pane -L 5

bind -r m resize-pane -Z

set -g mouse on

set-window-option -g mode-keys vi

bind-key -T copy-mode-vi 'v' send -X begin-selection # start selecting text with "v"
bind-key -T copy-mode-vi 'y' send -X copy-selection # copy text with "y"

unbind -T copy-mode-vi MouseDragEnd1Pane # don't exit copy mode when dragging with mouse

# tpm plugin
set -g @plugin 'tmux-plugins/tpm'

# list of tmux plugins
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-resurrect' # persist tmux sessions after computer restart
set -g @plugin 'tmux-plugins/tmux-continuum' # automatically saves sessions for you every 15 minutes

# Color Theme
set -g @plugin "arcticicestudio/nord-tmux"

set -g @resurrect-capture-pane-contents 'on'
set -g @continuum-restore 'on'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

```

<!-- Content_END -->
